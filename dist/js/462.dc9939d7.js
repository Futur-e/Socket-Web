"use strict";(self["webpackChunksocket_chat_vue3"]=self["webpackChunksocket_chat_vue3"]||[]).push([[462],{844:function(e,s,t){t.d(s,{_:function(){return n},d:function(){return r}});var i=t(3512);function n(e){return i.Z.get("/friend_requests/add_friend_request",{params:e})}function r(e){return i.Z.get("/friend_requests/get_friend_request_list",{params:e})}},6810:function(e,s,t){t.r(s),t.d(s,{default:function(){return Le}});var i=t(3396);const n={class:"friend"},r={key:0,class:"logo-page"},a=["src"];function d(e,s,d,c,o,l){const u=(0,i.up)("friend-list"),v=(0,i.up)("friend-window"),f=(0,i.up)("friend-req-list");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(u),e.store.state.currentFriend?-1!==e.store.state.currentFriend.id?((0,i.wg)(),(0,i.j4)(v,{key:1})):-1===e.store.state.currentFriend.id?((0,i.wg)(),(0,i.j4)(f,{key:2})):(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("img",{src:t(5522),alt:""},null,8,a)]))])}var c=t(7139),o=t(9242),l=t.p+"img/newFriend.d7f164f9.png";const u=e=>((0,i.dD)("data-v-4972e6ab"),e=e(),(0,i.Cn)(),e),v={class:"session-list"},f=u((()=>(0,i._)("div",{class:"session-top"},[(0,i._)("div",{class:"session-search"},[(0,i._)("i",{class:"iconfont icon-sousuoxiao"}),(0,i._)("input",{type:"text",placeholder:"搜索"})])],-1))),m={class:"friend-list-container"},_=u((()=>(0,i._)("div",{class:"cover"},[(0,i._)("img",{src:l,alt:""})],-1))),g=u((()=>(0,i._)("div",{class:"session-info"},[(0,i._)("div",{class:"session-name"},"新的好友")],-1))),p=[_,g],w=["onClick","onContextmenu"],F={class:"cover"},b=["src"],D={class:"session-info"},q={class:"session-name"};function k(e,s,t,n,r,a){return(0,i.wg)(),(0,i.iD)("div",v,[f,(0,i._)("div",m,[(0,i._)("div",{class:(0,c.C_)(["session-item",{"current-session":e.store.state.currentFriend&&-1===e.store.state.currentFriend.id}]),onClick:s[0]||(s[0]=s=>e.selectFriend({id:-1,userName:"新的好友",avatar:"",email:""}))},p,2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.store.state.friendListData.list,(s=>((0,i.wg)(),(0,i.iD)("div",{class:(0,c.C_)(["session-item",{"current-session":e.store.state.currentFriend&&e.store.state.currentFriend.id===s.id}]),onClick:t=>e.selectFriend(s),onContextmenu:(0,o.iM)((t=>e.rightClick(t,s)),["right","prevent"]),key:s.id},[(0,i._)("div",F,[(0,i._)("img",{src:s.avatar,alt:""},null,8,b)]),(0,i._)("div",D,[(0,i._)("div",q,(0,c.zw)(s.userName),1)])],42,w)))),128))])])}var h=t(3512);function C(e){return h.Z.get("/friends/add_friend",{params:e})}function y(){return h.Z.get("/friends/get_friend_list")}function L(e){return h.Z.get("/friends/delete_friend",{params:e})}var R=t(3017),Z=t.n(R),x=t(65),I=t(7458),H=t(6797),z=t.n(H),M=(0,i.aZ)({name:"friend-list",setup(){const e=(0,x.oR)(),s={timeHandler:(0,i.Fl)((()=>function(e){return z()(e).format("HH:mm")}))};(0,i.bv)((async()=>{if(!e.state.friendListData.isReq){let s=await y();s&&e.commit("setFriendListData",{isReq:!0,list:s.list})}}));const t=s=>{console.log(s),e.state.currentFriend&&e.state.currentFriend.id===s.id||e.commit("setCurrentFriend",s)},n=(s,t)=>{console.log(t),Z().publish("rightMenu",{position:{x:s.x,y:s.y},menuList:[{content:"解除好友关系",callback:async()=>{let s=await L({friendId:t.id});s&&(I.ZP.success("已成功解除好友关系"),e.commit("deleteFriend",t.id))}}]})};return{...s,selectFriend:t,rightClick:n,store:e}}}),j=t(89);const B=(0,j.Z)(M,[["render",k],["__scopeId","data-v-4972e6ab"]]);var N=B;const K=e=>((0,i.dD)("data-v-f2771f80"),e=e(),(0,i.Cn)(),e),W={class:"friend-window"},T={class:"card-container"},Y={class:"window-top"},A={class:"top-left"},E={class:"user-name"},P=K((()=>(0,i._)("div",{class:"signature"},"个性签名(待开发)",-1))),S={class:"avatar"},G=["src"],J={class:"window-middle"},O=(0,i.uE)('<div class="middle-item" data-v-f2771f80><div class="title" data-v-f2771f80>备注</div><div class="value" data-v-f2771f80>(待开发)</div></div><div class="middle-item" data-v-f2771f80><div class="title" data-v-f2771f80>地区</div><div class="value" data-v-f2771f80>(待开发)</div></div>',2),Q={class:"middle-item"},U=K((()=>(0,i._)("div",{class:"title"},"ID",-1))),V={class:"value"},X={class:"window-bottom"};function $(e,s,t,n,r,a){return(0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("div",T,[(0,i._)("div",Y,[(0,i._)("div",A,[(0,i._)("div",E,(0,c.zw)(e.store.state.currentFriend.userName),1),P]),(0,i._)("div",S,[(0,i._)("img",{src:e.store.state.currentFriend.avatar,alt:""},null,8,G)])]),(0,i._)("div",J,[O,(0,i._)("div",Q,[U,(0,i._)("div",V,(0,c.zw)(e.store.state.currentFriend.id),1)])]),(0,i._)("div",X,[(0,i._)("div",{class:"sendMsg",onClick:s[0]||(s[0]=s=>e.sendMsg(e.store.state.currentFriend.id))},"发信息")])])])}var ee=t(678),se=(0,i.aZ)({name:"friend-window",setup(){const e=(0,x.oR)(),s=(0,ee.tv)(),t=e=>{s.push({name:"chat",params:{friendId:e}})};return{sendMsg:t,store:e}}});const te=(0,j.Z)(se,[["render",$],["__scopeId","data-v-f2771f80"]]);var ie=te;const ne=e=>((0,i.dD)("data-v-3b674008"),e=e(),(0,i.Cn)(),e),re={class:"friend-req-list"},ae=ne((()=>(0,i._)("div",{class:"req-head"},"新的好友",-1))),de={key:0,class:"req-list"},ce={class:"avatar"},oe=["src"],le={class:"item-info"},ue={class:"info-left"},ve={class:"name"},fe={class:"content"},me=["onClick"],_e={key:1,class:"accepted"},ge={key:1,class:"tips"};function pe(e,s,t,n,r,a){const d=(0,i.up)("loading"),o=(0,i.up)("scroll-box");return(0,i.wg)(),(0,i.iD)("div",re,[ae,(0,i.Wm)(o,{class:"scroll-box",listenHeight:"",ref:"scrollBox",topDisabled:!0,bottomDisabled:e.bottomDisabled,bottomDistance:30,onTouchBottom:s[0]||(s[0]=s=>e.getFriendReqList(e.friendReqList[e.friendReqList.length-1].createdAt))},{default:(0,i.w5)((()=>[e.friendReqList.length>0?((0,i.wg)(),(0,i.iD)("div",de,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.friendReqList,(s=>((0,i.wg)(),(0,i.iD)("div",{class:"req-item",key:s.id},[(0,i._)("div",ce,[(0,i._)("img",{src:s.user.avatar,alt:""},null,8,oe)]),(0,i._)("div",le,[(0,i._)("div",ue,[(0,i._)("div",ve,(0,c.zw)(s.user.userName),1),(0,i._)("div",fe,(0,c.zw)(s.content),1)]),0===s.handle?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"accept",onClick:t=>e.addFriendFaq(s)},"接受",8,me)):((0,i.wg)(),(0,i.iD)("div",_e,"已添加"))])])))),128)),!e.bottomDisabled&&e.friendReqList.length>=20?((0,i.wg)(),(0,i.j4)(d,{key:0})):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",ge,"暂无好友请求哦"))])),_:1},8,["bottomDisabled"])])}var we=t(844),Fe=t(6745),be=t(1018),De=t(4870),qe=(0,i.aZ)({components:{ScrollBox:Fe.Z,Loading:be.Z},name:"friend-req-list",setup(){const e=(0,x.oR)(),s=(0,De.qj)({friendReqList:[],bottomDisabled:!1});(0,i.bv)((()=>{t()}));const t=async e=>{s.bottomDisabled=!0;let t=await(0,we.d)({lastTime:e});t&&(s.friendReqList.push(...t.list),s.bottomDisabled=t.list.length<20)},n=async s=>{let t=await C({requestId:s.id});t&&(e.commit("addFriend",t.userInfo),s.handle=1)};return{...(0,De.BK)(s),addFriendFaq:n,getFriendReqList:t}}});const ke=(0,j.Z)(qe,[["render",pe],["__scopeId","data-v-3b674008"]]);var he=ke,Ce=(0,i.aZ)({components:{FriendList:N,FriendWindow:ie,FriendReqList:he},name:"friend-page",setup(){const e=(0,x.oR)();return{store:e}}});const ye=(0,j.Z)(Ce,[["render",d],["__scopeId","data-v-26d567e8"]]);var Le=ye},5522:function(e,s,t){e.exports=t.p+"img/logo.7d1a3f32.svg"}}]);
//# sourceMappingURL=462.dc9939d7.js.map