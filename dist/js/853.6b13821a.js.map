{"version":3,"file":"js/853.6b13821a.js","mappings":"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","sources":["webpack://socket_chat_vue3/./src/hooks/subscribe.ts","webpack://socket_chat_vue3/./src/hooks/webrtc.ts","webpack://socket_chat_vue3/./node_modules/@ant-design/icons-svg/es/asn/PlusOutlined.js","webpack://socket_chat_vue3/./node_modules/@ant-design/icons-vue/es/icons/PlusOutlined.js","webpack://socket_chat_vue3/./src/views/Chat.vue?ce3f","webpack://socket_chat_vue3/./src/components/chatWindow/ChatWindow.vue?7a5e","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/ChatDialog.vue?a74a","webpack://socket_chat_vue3/./src/api/chat.ts","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/children/userItem.vue?6d8b","webpack://socket_chat_vue3/./src/components/DownloadCard.vue?7149","webpack://socket_chat_vue3/./src/components/DownloadCard.vue?5c5b","webpack://socket_chat_vue3/./src/components/DownloadCard.vue","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/children/userItem.vue?7c63","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/children/userItem.vue","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/children/talkerItem.vue?b772","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/children/talkerItem.vue?b750","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/children/talkerItem.vue","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/children/NotificationTag.vue?ed1f","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/children/NotificationTag.vue?18f0","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/children/NotificationTag.vue","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/ChatDialog.vue?c243","webpack://socket_chat_vue3/./src/components/chatWindow/children/chatDialog/ChatDialog.vue","webpack://socket_chat_vue3/./src/components/chatWindow/children/ChatTopBar.vue?943a","webpack://socket_chat_vue3/./src/components/chatWindow/children/ChatTopBar.vue?3239","webpack://socket_chat_vue3/./src/components/chatWindow/children/ChatTopBar.vue","webpack://socket_chat_vue3/./src/components/chatWindow/children/InputBox.vue?1d9d","webpack://socket_chat_vue3/./src/components/ChatInput.vue?ae04","webpack://socket_chat_vue3/./src/components/ChatInput.vue?aead","webpack://socket_chat_vue3/./src/components/ChatInput.vue","webpack://socket_chat_vue3/./src/components/EmojiDialog.vue?b6da","webpack://socket_chat_vue3/./src/api/emoticon.ts","webpack://socket_chat_vue3/./src/components/EmojiDialog.vue?38fe","webpack://socket_chat_vue3/./src/components/EmojiDialog.vue","webpack://socket_chat_vue3/./src/components/UploadCmp.vue?355b","webpack://socket_chat_vue3/./src/components/UploadCmp.vue?299b","webpack://socket_chat_vue3/./src/components/UploadCmp.vue","webpack://socket_chat_vue3/./src/components/chatWindow/children/InputBox.vue?e109","webpack://socket_chat_vue3/./src/components/chatWindow/children/InputBox.vue","webpack://socket_chat_vue3/./src/components/chatWindow/children/NotiDialog.vue?f050","webpack://socket_chat_vue3/./src/api/notification.ts","webpack://socket_chat_vue3/./src/components/chatWindow/children/NotiDialog.vue?a358","webpack://socket_chat_vue3/./src/components/chatWindow/children/NotiDialog.vue","webpack://socket_chat_vue3/./src/components/chatWindow/children/VideoWindow.vue?4820","webpack://socket_chat_vue3/./src/components/chatWindow/children/VideoWindow.vue?15f3","webpack://socket_chat_vue3/./src/components/chatWindow/children/VideoWindow.vue","webpack://socket_chat_vue3/./src/components/chatWindow/ChatWindow.vue?0506","webpack://socket_chat_vue3/./src/components/chatWindow/ChatWindow.vue","webpack://socket_chat_vue3/./src/components/SessionList.vue?7469","webpack://socket_chat_vue3/./src/components/SessionList.vue?de8d","webpack://socket_chat_vue3/./src/components/SessionList.vue","webpack://socket_chat_vue3/./src/views/Chat.vue?6761","webpack://socket_chat_vue3/./src/views/Chat.vue"],"sourcesContent":["import { Subscribe } from \"@/type\";\r\nimport { onBeforeUnmount } from \"vue\";\r\n\r\nexport default function (subList: Subscribe[]) {\r\n  subList.forEach((item, index, list) => {\r\n    list[index]['token'] = PubSub.subscribe(item.msgName, item.callback)\r\n  })\r\n\r\n  onBeforeUnmount(() => {\r\n    subList.forEach(item => {\r\n      PubSub.unsubscribe(item.token as string)\r\n    })\r\n  })\r\n}","import store from \"@/store\";\r\nimport { PC } from \"@/type\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { nextTick } from \"vue\";\r\n\r\nconst pcOption = {\r\n  iceServers: [\r\n    { urls: 'stun:stun.xten.com' },\r\n    { urls: 'stun:stun.voipbuster.com' },\r\n  ]\r\n}\r\n\r\ninterface WebRtcType {\r\n  // mode: sender / receiver\r\n  mode: string,\r\n  // type: videoCall / privateChat \r\n  type: string[],\r\n}\r\n\r\nexport default function ({ mode, type }: WebRtcType) {\r\n  let remoteVideo: HTMLMediaElement\r\n  let localVideo: HTMLMediaElement\r\n  let mediaStream: MediaStream\r\n  let remoteStream: MediaStream\r\n  let dc: RTCDataChannel\r\n\r\n  const onicecandidate = (e: RTCPeerConnectionIceEvent) => {\r\n    if (e.candidate) {\r\n      store.state.socket?.emit('webRTC', {\r\n        type: 'candidate',\r\n        data: e.candidate,\r\n        receiverId: store.state.currentSession?.receiverId,\r\n      })\r\n    } else {\r\n      console.log('候选人收集完成!');\r\n    }\r\n  }\r\n\r\n  const ontrack = (e: RTCTrackEvent) => {\r\n    nextTick(() => {\r\n      remoteVideo = document.querySelector('#remote-video') as HTMLMediaElement;\r\n      if (remoteVideo.srcObject !== e.streams[0]) {\r\n        remoteVideo.srcObject = e.streams[0];\r\n        remoteStream = e.streams[0]\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  const oniceconnectionstatechange = () => {\r\n    // checking connected disconnected\r\n    if (pc.iceConnectionState === 'disconnected') {\r\n      hangup()\r\n      message.info('对方已挂断通话!')\r\n    }\r\n  }\r\n\r\n  const getLocalMediaStream = async () => {\r\n    try {\r\n      mediaStream = await navigator.mediaDevices.getUserMedia({ audio: true, video: true })\r\n    } catch (err) {\r\n      console.log(err);\r\n      message.error('获取媒体流失败, 请检查摄像头和麦克风权限哦!')\r\n      hangup()\r\n    }\r\n\r\n    nextTick(() => {\r\n      localVideo = document.querySelector('#local-video') as HTMLMediaElement;\r\n      localVideo.srcObject = mediaStream;\r\n    })\r\n\r\n    // 绑定本地媒体数据到pc对象上\r\n    mediaStream.getTracks().forEach(track => {\r\n      pc.addTrack(track, mediaStream);\r\n    });\r\n  };\r\n\r\n  const hangup = () => {\r\n    if (pc.iceConnectionState === 'new') {\r\n      // 发送取消请求通知\r\n      store.state.socket?.emit('webRTC', {\r\n        type: 'videoReq',\r\n        data: 'cancel',\r\n        senderId: store.state.userInfo?.id,\r\n        receiverId: store.state.currentSession?.receiverId,\r\n      })\r\n    }\r\n\r\n    mediaStream?.getTracks().forEach(track => track.stop())\r\n    remoteStream?.getTracks().forEach(track => track.stop())\r\n    type = type.filter(item => item !== 'videoCall')\r\n    // 判断是否还存在其它类型\r\n    if (!type.length) pc.close()\r\n\r\n    store.commit('setChatStatus', { type: 'videoCall', status: false })\r\n    store.commit('setPC', null)\r\n  }\r\n\r\n  const createAnswer = async () => {\r\n    // 绑定远端sdp\r\n    const answer = await pc.createAnswer()\r\n    // 绑定本地sdp\r\n    await pc.setLocalDescription(answer)\r\n    // 发送本地sdp到远端\r\n    store.state.socket?.emit('webRTC', {\r\n      type: 'answer',\r\n      data: answer,\r\n      senderId: store.state.userInfo?.id,\r\n      receiverId: store.state.currentSession?.receiverId,\r\n    })\r\n  }\r\n\r\n  const createOffer = async () => {\r\n    // 获取本地sdp(offer)\r\n    const offer = await pc.createOffer()\r\n    // 绑定本地sdp\r\n    await pc.setLocalDescription(offer)\r\n    // 发送本地sdp到远端\r\n    store.state.socket?.emit('webRTC', {\r\n      type: 'offer',\r\n      data: offer,\r\n      senderId: store.state.userInfo?.id,\r\n      receiverId: store.state.currentSession?.receiverId,\r\n    })\r\n  }\r\n\r\n  const createDataChannelFunc = () => {\r\n    dc = pc.createDataChannel(\"privateChat\")\r\n    dc.onopen = (e) => {\r\n      console.log('createDataChannel', e);\r\n      dc.send('hi there!')\r\n    }\r\n\r\n    dc.onmessage = (e) => {\r\n      console.log(e.data);\r\n    }\r\n  }\r\n\r\n  const ondatachannel = (e: RTCDataChannelEvent) => {\r\n    dc = e.channel\r\n    dc.onopen = (e) => {\r\n      console.log('ondatachannel', e);\r\n      dc.send('hi back')\r\n    }\r\n\r\n    dc.onmessage = (e) => {\r\n      console.log(e.data);\r\n    }\r\n  }\r\n\r\n  const closedown = () => {\r\n    dc.close()\r\n    type = type.filter(item => item !== 'privateChat')\r\n    // 判断是否还存在其它类型\r\n    if (!type.length) pc.close()\r\n  }\r\n\r\n  // 视频通话需要开启的监听以及挂载的方法\r\n  const videoCallHander = () => {\r\n    // 监听到远端传过来的媒体数据\r\n    pc.ontrack = ontrack\r\n    // 绑定本地媒体流后创建 answer\r\n    getLocalMediaStream().then(() => {\r\n      // create在对方接受邀请后才调用，因为发起方在邀请过程中就需要打开摄像头，而接收方只有在接受后才打开\r\n      // if (mode === 'sender') { createOffer() } else \r\n      if (mode === 'receiver') createAnswer()\r\n    })\r\n\r\n    // 创建offer的方法\r\n    pc.createOfferFunc = createOffer\r\n    // 挂断视频通话的方法\r\n    pc.hangup = hangup\r\n  }\r\n\r\n  // 私密聊天需要开启的监听以及挂载的方法\r\n  const privateChatHander = () => {\r\n    // 接收端 datachannel\r\n    pc.ondatachannel = ondatachannel\r\n\r\n    // 创建dataChannel的方法\r\n    pc.createDataChannelFunc = createDataChannelFunc\r\n    // 关闭私密聊天的方法\r\n    pc.closedown = closedown\r\n  }\r\n\r\n\r\n  const pc: PC = new RTCPeerConnection(pcOption)\r\n  store.commit('setPC', pc)\r\n  // 修改当前聊天状态为视频通话状态\r\n  // store.commit('setChatStatus', 1)\r\n  store.commit('setChatStatus', { type: 'videoCall', status: true })\r\n\r\n  // 监听\r\n  // 监听 candidate\r\n  pc.onicecandidate = onicecandidate\r\n  // 监听ice connection的状态改变\r\n  pc.oniceconnectionstatechange = oniceconnectionstatechange\r\n\r\n  if (type.indexOf('videoCall') !== -1) {\r\n    videoCallHander()\r\n  }\r\n\r\n  if (type.indexOf('privateChat') !== -1) {\r\n    privateChatHander()\r\n  }\r\n\r\n}\r\n\r\n","// This icon file is generated automatically.\nvar PlusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z\" } }] }, \"name\": \"plus\", \"theme\": \"outlined\" };\nexport default PlusOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport PlusOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusOutlined = function PlusOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": PlusOutlinedSvg\n  }), null);\n};\n\nPlusOutlined.displayName = 'PlusOutlined';\nPlusOutlined.inheritAttrs = false;\nexport default PlusOutlined;","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-560dd598\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"chat\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_session_list = _resolveComponent(\"session-list\")!\n  const _component_chat_window = _resolveComponent(\"chat-window\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_session_list),\n    _createVNode(_component_chat_window, { class: \"chat-window\" })\n  ]))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5377033d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"chat-window\"\n}\nconst _hoisted_2 = { class: \"chat-area\" }\nconst _hoisted_3 = { key: 0 }\nconst _hoisted_4 = { key: 1 }\nconst _hoisted_5 = {\n  key: 1,\n  class: \"logo-page\"\n}\nconst _hoisted_6 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_chat_top_bar = _resolveComponent(\"chat-top-bar\")!\n  const _component_chat_dialog = _resolveComponent(\"chat-dialog\")!\n  const _component_input_box = _resolveComponent(\"input-box\")!\n  const _component_noti_dialog = _resolveComponent(\"noti-dialog\")!\n  const _component_video_window = _resolveComponent(\"video-window\")!\n\n  return (_ctx.store.state.currentSession && _ctx.store.state.currentSession.sessionId)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createVNode(_component_chat_top_bar),\n          (_ctx.store.state.currentSession.type !== 2)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                _createVNode(_component_chat_dialog),\n                _createVNode(_component_input_box)\n              ]))\n            : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                _createVNode(_component_noti_dialog)\n              ]))\n        ]),\n        _createVNode(_component_video_window, { class: \"video-area\" })\n      ]))\n    : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n        _createElementVNode(\"img\", {\n          src: require('@/assets/img/logo.svg'),\n          alt: \"\"\n        }, null, 8, _hoisted_6)\n      ]))\n}","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, resolveDynamicComponent as _resolveDynamicComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_loading = _resolveComponent(\"loading\")!\n  const _component_scroll_box = _resolveComponent(\"scroll-box\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"chat-dialog\",\n    onDrop: _cache[1] || (_cache[1] = _withModifiers(($event: any) => (_ctx.message.info('拖动到输入框可以直接发送文件哦')), [\"prevent\"])),\n    onDragover: _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"prevent\"]))\n  }, [\n    _createVNode(_component_scroll_box, {\n      class: \"scroll-box\",\n      listenHeight: \"\",\n      ref: \"scrollBox\",\n      topDisabled: _ctx.topDisabled,\n      onTouchTop: _cache[0] || (_cache[0] = ($event: any) => (_ctx.getChatList(_ctx.chatList[0].updatedAt)))\n    }, {\n      default: _withCtx(() => [\n        (!_ctx.topDisabled && _ctx.chatList.length >= 30)\n          ? (_openBlock(), _createBlock(_component_loading, { key: 0 }))\n          : _createCommentVNode(\"\", true),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.chatList, (item) => {\n          return (_openBlock(), _createBlock(_resolveDynamicComponent(item.component), {\n            key: item.updatedAt,\n            chat: item,\n            content: item.content\n          }, null, 8, [\"chat\", \"content\"]))\n        }), 128))\n      ]),\n      _: 1\n    }, 8, [\"topDisabled\"])\n  ], 32))\n}","import { ChatItem } from \"@/type\";\r\nimport request from \"@/utils/request\";\r\nimport axios from \"axios\";\r\n\r\n// 获取聊天记录\r\nexport function api_getChatList(\r\n  params: { sessionId: string; lastTime?: number },\r\n  state: { [propname: string]: any }\r\n) {\r\n  return request.get(\"/chats/get_chat_list\", {\r\n    params,\r\n    cancelToken: new axios.CancelToken(function executor(c) {\r\n      state.cancelChatListFunc = c;\r\n    }),\r\n  }) as unknown as getChatListType;\r\n}\r\n\r\ntype getChatListType = {\r\n  code: number,\r\n  list: ChatItem[]\r\n}\r\n\r\n// 请求返回内容类型\r\n// export type getChatListType = {\r\n\r\n// }","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-25e67d8c\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"user-item\" }\nconst _hoisted_2 = { class: \"item-left-container\" }\nconst _hoisted_3 = { class: \"status\" }\nconst _hoisted_4 = { class: \"item-left\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"message-container\"\n}\nconst _hoisted_6 = [\"innerHTML\"]\nconst _hoisted_7 = [\"src\"]\nconst _hoisted_8 = {\n  key: 3,\n  class: \"message-container message\"\n}\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-shipin\" }, null, -1))\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"我发起了一个视频通话 \")\nconst _hoisted_11 = [\n  _hoisted_9,\n  _hoisted_10\n]\nconst _hoisted_12 = { class: \"avatar\" }\nconst _hoisted_13 = [\"src\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_loading = _resolveComponent(\"loading\")!\n  const _component_download_card = _resolveComponent(\"download-card\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        (_ctx.chat.status == 'loading')\n          ? (_openBlock(), _createBlock(_component_loading, {\n              key: 0,\n              scale: \"0.5\"\n            }))\n          : (_ctx.chat.status == 'fail')\n            ? (_openBlock(), _createElementBlock(\"i\", {\n                key: 1,\n                class: \"iconfont icon-shuaxin\",\n                title: \"点击重发\",\n                onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.resend && _ctx.resend(...args)))\n              }))\n            : _createCommentVNode(\"\", true)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        (_ctx.chat.type == 0)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n              _createElementVNode(\"pre\", {\n                class: \"message\",\n                innerHTML: _ctx.content\n              }, null, 8, _hoisted_6)\n            ]))\n          : (_ctx.chat.type == 1 || _ctx.chat.type == 3)\n            ? (_openBlock(), _createElementBlock(\"div\", {\n                key: 1,\n                class: \"image\",\n                onContextmenu: _cache[3] || (_cache[3] = _withModifiers(($event: any) => (_ctx.rightClickPic($event, _ctx.chat)), [\"right\",\"prevent\"])),\n                style: _normalizeStyle(_ctx.imgStyle)\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _ctx.chat.content,\n                  alt: \"\",\n                  onDragstart: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"prevent\"])),\n                  onClick: _cache[2] || (_cache[2] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.checkImg && _ctx.checkImg(...args)), [\"stop\"]))\n                }, null, 40, _hoisted_7)\n              ], 36))\n            : (_ctx.chat.type == 2)\n              ? (_openBlock(), _createBlock(_component_download_card, {\n                  key: 2,\n                  file: _ctx.chat.content,\n                  fileInfo: _ctx.fileInfo\n                }, null, 8, [\"file\", \"fileInfo\"]))\n              : _createCommentVNode(\"\", true),\n        (_ctx.chat.type == 5)\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _hoisted_11))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_12, [\n      _createElementVNode(\"img\", {\n        src: _ctx.store.state.userInfo.avatar,\n        alt: \"\"\n      }, null, 8, _hoisted_13)\n    ])\n  ]))\n}","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3d860b10\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = [\"title\"]\nconst _hoisted_2 = { class: \"file-info\" }\nconst _hoisted_3 = { class: \"file-name\" }\nconst _hoisted_4 = { class: \"file-size\" }\nconst _hoisted_5 = { class: \"file-cover\" }\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = {\n  key: 0,\n  class: \"progress-bar\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"download-card\",\n    onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.download && _ctx.download(...args))),\n    title: _ctx.fileInfo.fileName\n  }, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.fileInfo.fileName), 1),\n      _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.sizeShow), 1)\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      _createElementVNode(\"img\", {\n        src: require('@/assets/img/fileImg.png'),\n        alt: \"\"\n      }, null, 8, _hoisted_6)\n    ]),\n    (_ctx.downing)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          _createElementVNode(\"div\", {\n            class: \"done-part\",\n            style: _normalizeStyle(`width:${_ctx.progress}%;`)\n          }, null, 4)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ], 8, _hoisted_1))\n}","\r\nimport axios from 'axios'\r\nimport { reactive, toRefs } from '@vue/reactivity'\r\nimport { message } from 'ant-design-vue'\r\nimport { computed, defineComponent } from '@vue/runtime-core'\r\n\r\nimport { FileInfo } from '@/type'\r\n\r\nexport default defineComponent({\r\n  name: 'download-card',\r\n  props: {\r\n    fileInfo: {\r\n      type: Object,\r\n      default: (): FileInfo => {\r\n        return { fileName: '', size: 0 }\r\n      },\r\n    },\r\n    file: String,\r\n  },\r\n  setup(props) {\r\n    const state = reactive({\r\n      // 下载进度\r\n      progress: 0,\r\n      // 是否正在下载\r\n      downing: false,\r\n    })\r\n    const compute = {\r\n      sizeShow: computed(() => {\r\n        let size = props.fileInfo?.size\r\n        if (size < 1024) {\r\n          return size + 'B'\r\n        } else if (size < 1024 * 1024) {\r\n          return (size / 1024).toFixed(2) + 'K'\r\n        } else {\r\n          return (size / 1024 / 1024).toFixed(2) + 'M'\r\n        }\r\n      }),\r\n    }\r\n\r\n    let cancelFunc: any = null\r\n\r\n    // methods\r\n    // 点击下载的回调\r\n    const download = () => {\r\n      if (state.downing && cancelFunc) {\r\n        // 取消下载\r\n        state.downing = false\r\n        message.info('取消下载')\r\n        cancelFunc('cancel download')\r\n      } else if (!state.downing) {\r\n        // 下载\r\n        state.downing = true\r\n        message.info('开始下载, 再次点击可取消下载')\r\n        let isLocal = /^blob/.test(props.file as string)\r\n        if (isLocal) {\r\n          createTag(props.file as string)\r\n        } else {\r\n          let src = (props.file as string).replace(process.env.VUE_APP_DOWNLOAD, '/download')\r\n          axios\r\n            .get(src, {\r\n              responseType: 'blob',\r\n              onDownloadProgress: (progressEvent) => {\r\n                state.progress = (progressEvent.loaded / progressEvent.total) * 100\r\n              },\r\n              cancelToken: new axios.CancelToken((c) => {\r\n                cancelFunc = c\r\n              }),\r\n            })\r\n            .then((res) => {\r\n              let blob = res.data\r\n              let src = URL.createObjectURL(blob)\r\n              createTag(src)\r\n            })\r\n            .catch((err) => {\r\n              if (err.message == 'cancel download') return\r\n              // console.log(err);\r\n              state.downing = false\r\n              message.error('下载失败!')\r\n            })\r\n        }\r\n      }\r\n\r\n      // 创建a标签并下载\r\n      function createTag(src: string) {\r\n        let a = document.createElement('a')\r\n        a.href = src\r\n        a.download = props.fileInfo?.fileName\r\n\r\n        a.click()\r\n        message.success('下载成功')\r\n        state.downing = false\r\n\r\n        URL.revokeObjectURL(src)\r\n        // a = null;\r\n      }\r\n    }\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      ...compute,\r\n      download,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./DownloadCard.vue?vue&type=template&id=3d860b10&scoped=true&ts=true\"\nimport script from \"./DownloadCard.vue?vue&type=script&lang=ts\"\nexport * from \"./DownloadCard.vue?vue&type=script&lang=ts\"\n\nimport \"./DownloadCard.vue?vue&type=style&index=0&id=3d860b10&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3d860b10\"]])\n\nexport default __exports__","\r\nimport { transToTag } from '@/utils/utils'\r\nimport DownloadCard from '@/components/DownloadCard.vue'\r\nimport Loading from '@/components/Loading.vue'\r\n\r\nimport Pubsub from 'pubsub-js'\r\nimport { computed, defineComponent, onBeforeUnmount, onMounted, PropType } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\n\r\n// import { Chat } from './chatItem'\r\nimport { useStore } from 'vuex'\r\nimport { ChatItem } from '@/type'\r\n\r\nexport default defineComponent({\r\n  name: 'user-item',\r\n  components: { DownloadCard, Loading },\r\n  props: {\r\n    chat: {\r\n      type: Object as PropType<ChatItem>,\r\n      default: null,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const store = useStore()\r\n    const compute = {\r\n      content: computed(() => transToTag(props.chat.content)),\r\n      imgStyle: computed(() => {\r\n        // 如果是blob开头, 说明是刚发送的图片\r\n        if (/^blob:/.test(props.chat.content)) return ''\r\n        let reg = /\\??size=([0-9]{1,3}x[0-9]{1,3})&?/\r\n        let arr = (props.chat.content.match(reg) as RegExpMatchArray)[1].split('x')\r\n        return `width:${arr[0]}px;height:${arr[1]}px;`\r\n      }),\r\n      fileInfo: computed(() => {\r\n        if (/^blob:/.test(props.chat.content)) return props.chat.fileInfo\r\n        return JSON.parse(props.chat.others as unknown as string)\r\n      }),\r\n    }\r\n    let timer: number | null = null\r\n\r\n    // 生命周期\r\n    onMounted(() => {\r\n      createTimer()\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      timer && clearTimeout(timer)\r\n    })\r\n\r\n    // methods\r\n    // 点击重发的回调\r\n    const resend = () => {\r\n      let chatItem = {\r\n        content: props.chat.file,\r\n        receiverId: props.chat.receiverId,\r\n        uuid: props.chat.uuid,\r\n        type: props.chat.type,\r\n        sessionId: props.chat.sessionId,\r\n        fileInfo: props.chat.fileInfo,\r\n      }\r\n      store.state.socket?.emit('chat', chatItem)\r\n      // 直接改props就报语法错了 这里赋值下再改\r\n      let chat = props.chat\r\n      chat.status = 'loading'\r\n      createTimer()\r\n    }\r\n\r\n    // 右键点击图片的回调\r\n    const rightClickPic = (e: MouseEvent, chat: ChatItem) => {\r\n      if (chat.status === 'fail' || chat.status === 'loading') {\r\n        message.info(`图片当前处于${chat.status}阶段, 无法操作`)\r\n        return\r\n      }\r\n      Pubsub.publish('rightMenu', {\r\n        position: { x: e.x, y: e.y },\r\n        menuList: [\r\n          {\r\n            content: '收藏至自定义表情',\r\n            callback: () => {\r\n              Pubsub.publish('addEmoticon', chat.content)\r\n            },\r\n          },\r\n        ],\r\n      })\r\n    }\r\n\r\n    // 设置超时的定时器\r\n    const createTimer = () => {\r\n      if (props.chat.status == 'loading') {\r\n        timer = setTimeout(() => {\r\n          if (props.chat.status == 'loading') {\r\n            let chat = props.chat\r\n            chat.status = 'fail'\r\n          }\r\n          timer = null\r\n        }, 10000)\r\n      }\r\n    }\r\n\r\n    const checkImg = (e: MouseEvent) => {\r\n      Pubsub.publish('viewPicture', e.target)\r\n    }\r\n\r\n    return {\r\n      checkImg,\r\n      rightClickPic,\r\n      resend,\r\n      ...compute,\r\n      store,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./userItem.vue?vue&type=template&id=25e67d8c&scoped=true&ts=true\"\nimport script from \"./userItem.vue?vue&type=script&lang=ts\"\nexport * from \"./userItem.vue?vue&type=script&lang=ts\"\n\nimport \"./userItem.vue?vue&type=style&index=0&id=25e67d8c&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-25e67d8c\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, resolveComponent as _resolveComponent, createBlock as _createBlock, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7dd0d00a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"talker-item\" }\nconst _hoisted_2 = { class: \"avatar\" }\nconst _hoisted_3 = [\"src\"]\nconst _hoisted_4 = { class: \"item-right\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"item-right-top\"\n}\nconst _hoisted_6 = { class: \"user-name\" }\nconst _hoisted_7 = { class: \"time\" }\nconst _hoisted_8 = {\n  key: 1,\n  class: \"message-container\"\n}\nconst _hoisted_9 = [\"innerHTML\"]\nconst _hoisted_10 = [\"src\"]\nconst _hoisted_11 = {\n  key: 4,\n  class: \"message-container message\"\n}\nconst _hoisted_12 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-shipin\" }, null, -1))\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\"对方发起了一个视频邀请 \")\nconst _hoisted_14 = [\n  _hoisted_12,\n  _hoisted_13\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_download_card = _resolveComponent(\"download-card\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"img\", {\n        src: _ctx.userInfo?.avatar,\n        alt: \"\"\n      }, null, 8, _hoisted_3)\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      (_ctx.chat?.sort === 1)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n            _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.userInfo?.userName), 1),\n            _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_ctx.chat?.updatedAt), 1)\n          ]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.chat?.type == 0)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n            _createElementVNode(\"pre\", {\n              class: \"message\",\n              innerHTML: _ctx.content\n            }, null, 8, _hoisted_9)\n          ]))\n        : (_ctx.chat.type == 1 || _ctx.chat.type == 3)\n          ? (_openBlock(), _createElementBlock(\"div\", {\n              key: 2,\n              class: \"image\",\n              onContextmenu: _cache[2] || (_cache[2] = _withModifiers(($event: any) => (_ctx.rightClickPic($event, _ctx.chat.content)), [\"right\",\"prevent\"])),\n              style: _normalizeStyle(_ctx.imgStyle)\n            }, [\n              _createElementVNode(\"img\", {\n                src: _ctx.chat.content,\n                alt: \"\",\n                onDragstart: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"])),\n                onClick: _cache[1] || (_cache[1] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.checkImg && _ctx.checkImg(...args)), [\"stop\"]))\n              }, null, 40, _hoisted_10)\n            ], 36))\n          : (_ctx.chat.type == 2)\n            ? (_openBlock(), _createBlock(_component_download_card, {\n                key: 3,\n                file: _ctx.chat.content,\n                fileInfo: _ctx.fileInfo\n              }, null, 8, [\"file\", \"fileInfo\"]))\n            : _createCommentVNode(\"\", true),\n      (_ctx.chat.type == 5)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _hoisted_14))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}","\r\nimport { transToTag } from '@/utils/utils'\r\nimport DownloadCard from '@/components/DownloadCard.vue'\r\n\r\nimport Pubsub from 'pubsub-js'\r\nimport { reactive, computed, toRefs, onMounted, defineComponent } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { ChatItem, User } from '@/type'\r\n\r\nexport default defineComponent({\r\n  name: 'talker-item',\r\n  components: { DownloadCard },\r\n  props: {\r\n    chat: {\r\n      type: Object,\r\n      default: (): ChatItem | null => {\r\n        return null\r\n      },\r\n    },\r\n  },\r\n  setup(props) {\r\n    const store = useStore()\r\n    const state: State = reactive({\r\n      // 用户信息\r\n      userInfo: null,\r\n    })\r\n    const compute = {\r\n      content: computed(() => transToTag(props.chat.content)),\r\n      imgStyle: computed(() => {\r\n        // 如果是blob开头, 说明是刚发送的图片\r\n        if (/^blob:/.test(props.chat.content)) return ''\r\n        let reg = /\\??size=([0-9]{1,3}x[0-9]{1,3})&?/\r\n        let arr = props.chat.content.match(reg)[1].split('x')\r\n        return `width:${arr[0]}px;height:${arr[1]}px;`\r\n      }),\r\n      fileInfo: computed(() => {\r\n        if (/^blob:/.test(props.chat.content)) return props.chat.fileInfo\r\n        return JSON.parse(props.chat.others)\r\n      }),\r\n    }\r\n\r\n    // 生命周期\r\n    onMounted(() => {\r\n      // 如果是私聊  用户信息可以直接从session里面取\r\n      if (store.state.currentSession.type === 0) {\r\n        state.userInfo = store.state.currentSession.user\r\n      }\r\n    })\r\n\r\n    // methods\r\n    // 右键点击图片的回调\r\n    const rightClickPic = (e: MouseEvent, src: string) => {\r\n      Pubsub.publish('rightMenu', {\r\n        position: { x: e.x, y: e.y },\r\n        menuList: [\r\n          {\r\n            content: '收藏至自定义表情',\r\n            callback: () => {\r\n              Pubsub.publish('addEmoticon', src)\r\n            },\r\n          },\r\n        ],\r\n      })\r\n    }\r\n\r\n    const checkImg = (e: MouseEvent) => {\r\n      Pubsub.publish('viewPicture', e.target)\r\n    }\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      ...compute,\r\n      rightClickPic,\r\n      checkImg,\r\n    }\r\n  },\r\n})\r\n\r\ntype State = {\r\n  userInfo: User | null\r\n}\r\n","import { render } from \"./talkerItem.vue?vue&type=template&id=7dd0d00a&scoped=true&ts=true\"\nimport script from \"./talkerItem.vue?vue&type=script&lang=ts\"\nexport * from \"./talkerItem.vue?vue&type=script&lang=ts\"\n\nimport \"./talkerItem.vue?vue&type=style&index=0&id=7dd0d00a&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7dd0d00a\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-c83a49ee\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"time-tag\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"span\", null, _toDisplayString(_ctx.content), 1)\n  ]))\n}","\r\nimport { defineComponent } from '@vue/runtime-core'\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    content: String,\r\n  },\r\n})\r\n","import { render } from \"./NotificationTag.vue?vue&type=template&id=c83a49ee&scoped=true&ts=true\"\nimport script from \"./NotificationTag.vue?vue&type=script&lang=ts\"\nexport * from \"./NotificationTag.vue?vue&type=script&lang=ts\"\n\nimport \"./NotificationTag.vue?vue&type=style&index=0&id=c83a49ee&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c83a49ee\"]])\n\nexport default __exports__","\r\nimport { api_getChatList } from '@/api/chat'\r\nimport userItem from './children/userItem.vue'\r\nimport TalkerItem from './children/talkerItem.vue'\r\nimport NotificationTag from './children/NotificationTag.vue'\r\nimport ScrollBox from '@/components/ScrollBox.vue'\r\nimport Loading from '@/components/Loading.vue'\r\n\r\nimport moment from 'moment'\r\nimport { reactive, toRefs } from '@vue/reactivity'\r\nimport useSubscribe from '@/hooks/subscribe'\r\n\r\nimport {\r\n  onBeforeUnmount,\r\n  onMounted,\r\n  nextTick,\r\n  getCurrentInstance,\r\n  watch,\r\n  onBeforeMount,\r\n  ComponentInternalInstance,\r\n  defineComponent,\r\n  // ref,\r\n} from 'vue'\r\nimport { useStore } from 'vuex'\r\n\r\nimport { Canceler } from 'axios'\r\nimport { TimeTag, SuccessMsg, FailMsg, ReceiveMsg, ChatItem } from '@/type'\r\nimport { message } from 'ant-design-vue'\r\n\r\nexport default defineComponent({\r\n  components: { userItem, TalkerItem, ScrollBox, Loading, NotificationTag },\r\n  name: 'chat-dialog',\r\n  props: {\r\n    // 当前的sessionId\r\n    sessionId: String,\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const { proxy } = getCurrentInstance() as ComponentInternalInstance\r\n    const state: State = reactive({\r\n      chatList: [],\r\n      // 禁止触顶\r\n      topDisabled: false,\r\n      // 取消请求聊天列表的方法\r\n      cancelChatListFunc: null,\r\n    })\r\n    // let scrollBox = ref(null)\r\n    let scrollBox: typeof ScrollBox | null = null\r\n\r\n    let timeTagFunc: ((item1: ChatItem | ReceiveMsg, item2: ChatItem | ReceiveMsg) => TimeTag | undefined) | null = null\r\n\r\n    // 生命周期\r\n    onBeforeMount(() => {\r\n      timeTagFunc = createTimeTag()\r\n\r\n      useSubscribe([\r\n        // 监听输入框发送的消息\r\n        { msgName: 'sendMsg', callback: sendMsg },\r\n        // 接收其它用户发送的消息\r\n        { msgName: 'chat', callback: receiveChat },\r\n        // 发送消息成功\r\n        { msgName: 'sendMsgSuccess', callback: sendMsgSuccess },\r\n        // 发送消息失败\r\n        { msgName: 'sendMsgFail', callback: sendMsgFail },\r\n      ])\r\n    })\r\n    onMounted(() => {\r\n      // scrollBox=scrollBox.value && (scrollBox.value as typeof ScrollBox)\r\n      scrollBox = proxy && (proxy.$refs.scrollBox as typeof ScrollBox)\r\n      // 第一次创建时直接请求聊天数据\r\n      getChatList()\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      state.cancelChatListFunc && state.cancelChatListFunc()\r\n    })\r\n\r\n    // methods\r\n    // 请求\r\n    // 请求聊天记录\r\n    const getChatList = async (lastTime?: number) => {\r\n      state.topDisabled = true\r\n      let res = await api_getChatList({ sessionId: store.state.currentSession.sessionId, lastTime }, state)\r\n      if (res) {\r\n        let arr = insertTimeTag(res.list)\r\n\r\n        if (!lastTime) {\r\n          state.chatList.unshift(...arr)\r\n          // 没传时间，则是第一次获取聊天记录，滚动到底部\r\n          scrollToFunc('instant')\r\n        } else {\r\n          scrollBox &&\r\n            scrollBox.keepHeight(() => {\r\n              state.chatList.unshift(...arr)\r\n            })\r\n        }\r\n\r\n        // 聊天记录一次请求30条，小于30条说明没有更多聊天数据了\r\n        state.topDisabled = arr.length < 30\r\n        state.cancelChatListFunc = null\r\n      }\r\n    }\r\n\r\n    // 输入框发送消息的回调\r\n    const sendMsg = (name: string, chatItem: ChatItem) => {\r\n      let list = state.chatList\r\n      let timeTag = timeTagFunc && timeTagFunc(chatItem, list[list.length - 1] as ChatItem)\r\n      if (timeTag) list.push(timeTag)\r\n      chatItem.component = 'user-item'\r\n      list.push(chatItem)\r\n      // 自己发消息，直接滚到底部\r\n      // 读取本地图片并加载需要一定时间, 监听img的onload事件是更好的做法, 但是这里不想弄了, 定时器凑合一下\r\n      let timer = setTimeout(() => {\r\n        scrollToFunc()\r\n        clearTimeout(timer)\r\n        timer = -1\r\n      }, 50)\r\n    }\r\n\r\n    // 接收别的用户发送的消息\r\n    const receiveChat = (name: string, msg: ReceiveMsg) => {\r\n      let list = state.chatList\r\n      // 先判断是否是当前会话\r\n      if (msg.sessionId !== store.state.currentSession.sessionId) return\r\n      if (msg.type == 4) {\r\n        msg.component = 'notification-tag'\r\n      } else {\r\n        let timeTag = timeTagFunc && timeTagFunc(msg, list[list.length - 1] as ChatItem | ReceiveMsg)\r\n        if (timeTag) list.push(timeTag)\r\n        msg.component = msg.talkerId == store.state.currentSession.receiverId ? 'talker-item' : 'user-item'\r\n      }\r\n      list.push(msg)\r\n      // 判断当前是否离底，再进行滚动, 100表示100px内都是触底范围\r\n      scrollBox && scrollBox.getIsBottom(100) && scrollToFunc()\r\n    }\r\n\r\n    // 消息发送成功后的回调\r\n    const sendMsgSuccess = (name: string, msg: SuccessMsg) => {\r\n      let list = state.chatList\r\n      // 倒序遍历数组，因为刚发送的消息一般接近底部\r\n      for (let i = list.length - 1; i >= 0; i--) {\r\n        let item = list[i] as ChatItem\r\n        if (item.uuid === msg.uuid) {\r\n          // this.chatList[i] = msg\r\n          item.updatedAt = msg.updatedAt\r\n          item.status = 'success'\r\n          // console.log(this.chatList[i]);\r\n          if (item.type === 1) {\r\n            item.content = msg.content\r\n          }\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    // 发送消息失败的回调\r\n    const sendMsgFail = (name: string, msg: FailMsg) => {\r\n      // 判断是否处在对应的session\r\n      if (store.state.currentSession.sessionId !== msg.sessionId) return\r\n\r\n      let list = state.chatList\r\n      // 倒序遍历数组，因为刚发送的消息一般接近底部\r\n      for (let i = list.length - 1; i >= 0; i--) {\r\n        let item = list[i] as ChatItem\r\n        if (item.uuid === msg.uuid) {\r\n          item.status = 'fail'\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    // 聊天框滚动到底部\r\n    const scrollToFunc = (behavior?: string) => {\r\n      nextTick(() => {\r\n        if (proxy && !proxy.$refs.scrollBox) return\r\n        scrollBox && scrollBox.scrollToFunc(behavior)\r\n      })\r\n    }\r\n\r\n    // 根据消息时间插入时间节点标签\r\n    const insertTimeTag = (chatList: ChatItem[]) => {\r\n      let arr: (ChatItem | TimeTag)[] = []\r\n      let userId = store.state.userInfo.id\r\n\r\n      chatList.forEach((item, index, list) => {\r\n        // 通知\r\n        if (item.type == 4) {\r\n          item['component'] = 'notification-tag'\r\n\r\n          switch (item.content) {\r\n            case 'deleteFriend':\r\n              // 删除好友通知\r\n              item.content = (item.senderId == userId ? '您已与对方' : '对方已与您') + '解除好友关系'\r\n              break\r\n            default:\r\n              break\r\n          }\r\n        } else {\r\n          // 其它类型信息\r\n          if (item.senderId == userId) {\r\n            item['component'] = 'user-item'\r\n          } else {\r\n            item['component'] = 'talker-item'\r\n          }\r\n        }\r\n        arr.unshift(item)\r\n\r\n        let timeTag = index < list.length - 1 && timeTagFunc && timeTagFunc(item, list[index + 1])\r\n        if (timeTag) arr.unshift(timeTag)\r\n      })\r\n      return arr\r\n    }\r\n\r\n    // 将本日和本周时间戳闭包\r\n    const createTimeTag = () => {\r\n      // 当天0点时间戳\r\n      let today = moment().startOf('day').valueOf()\r\n      let thisWeek =\r\n        moment()\r\n          .week(moment().week() - 1)\r\n          .startOf('week')\r\n          .valueOf() + 86400000\r\n\r\n      return function (item1: ChatItem | ReceiveMsg, item2: ChatItem | ReceiveMsg) {\r\n        // 间隔超过5分钟显示时间节点标签\r\n        let updatedAt_item1 = parseInt(item1.updatedAt)\r\n        let updatedAt_item2 = parseInt(item2.updatedAt)\r\n        if (updatedAt_item1 - updatedAt_item2 > 5 * 60000) {\r\n          let time = null\r\n          if (updatedAt_item1 > today) time = moment(updatedAt_item1).format('HH:mm')\r\n          else if (updatedAt_item1 > thisWeek) time = moment(updatedAt_item1).locale('zh-cn').format('dddd HH:mm')\r\n          else time = moment(updatedAt_item1).format('YYYY年MM月DD日 HH:mm')\r\n\r\n          return { content: time, component: 'notification-tag', updatedAt: updatedAt_item1.toString() }\r\n        }\r\n      }\r\n    }\r\n\r\n    // watch\r\n    watch(\r\n      () => store.state.currentSession,\r\n      (current) => {\r\n        state.chatList = []\r\n        state.cancelChatListFunc && state.cancelChatListFunc('cancelChatListFunc')\r\n        if (current.receiverId !== -1) {\r\n          // receiverId为 -1 时是系统通知\r\n          getChatList()\r\n        }\r\n      }\r\n    )\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      getChatList,\r\n      message,\r\n    }\r\n  },\r\n})\r\n\r\ntype State = {\r\n  chatList: (ChatItem | TimeTag | ReceiveMsg)[]\r\n  topDisabled: boolean\r\n  cancelChatListFunc: null | Canceler\r\n}\r\n","import { render } from \"./ChatDialog.vue?vue&type=template&id=1768ba33&scoped=true&ts=true\"\nimport script from \"./ChatDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatDialog.vue?vue&type=style&index=0&id=1768ba33&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1768ba33\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-eed66ecc\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"chat-top-bar\" }\nconst _hoisted_2 = { class: \"bar-left\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, _toDisplayString($setup.store.state.currentSession.sessionName), 1)\n  ]))\n}","\r\n  import { useStore } from 'vuex'\r\n  export default {\r\n    name: \"chat-top-bar\",\r\n    setup() {\r\n      const store = useStore()\r\n      return {\r\n        store,\r\n      }\r\n    }\r\n  }\r\n","import { render } from \"./ChatTopBar.vue?vue&type=template&id=eed66ecc&scoped=true&ts=true\"\nimport script from \"./ChatTopBar.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatTopBar.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatTopBar.vue?vue&type=style&index=0&id=eed66ecc&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-eed66ecc\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1df7ac67\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"function-bar\" }\nconst _hoisted_2 = { class: \"bar-left\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-biaoqing-xue\" }, null, -1))\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-wenjianjiawenjianguanli\" }, null, -1))\nconst _hoisted_5 = { class: \"bar-right\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { style: { color: 'white' } }, \"点对点私密聊天, 聊天信息将不会经过服务器, 且不会被保存\", -1))\nconst _hoisted_7 = { class: \"bottom-bar\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_emoji_dialog = _resolveComponent(\"emoji-dialog\")!\n  const _component_upload_cmp = _resolveComponent(\"upload-cmp\")!\n  const _component_a_tooltip = _resolveComponent(\"a-tooltip\")!\n  const _component_chat_input = _resolveComponent(\"chat-input\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"input-box\",\n    tabindex: \"1\",\n    onDrop: _cache[3] || (_cache[3] = _withModifiers(\n//@ts-ignore\n(...args) => ($setup.dropFile && $setup.dropFile(...args)), [\"prevent\"])),\n    onDragover: _cache[4] || (_cache[4] = _withModifiers(() => {}, [\"prevent\"]))\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_emoji_dialog, { onSelectEmoji: $setup.selectEmoji }, {\n          default: _withCtx(() => [\n            _hoisted_3\n          ]),\n          _: 1\n        }, 8, [\"onSelectEmoji\"]),\n        _createVNode(_component_upload_cmp, { onUploadFile: $setup.uploadFile }, {\n          default: _withCtx(() => [\n            _hoisted_4\n          ]),\n          _: 1\n        }, 8, [\"onUploadFile\"])\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createVNode(_component_a_tooltip, { placement: \"topLeft\" }, {\n          title: _withCtx(() => [\n            _hoisted_6\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"i\", {\n              class: \"iconfont icon-jiami\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => ($setup.message.info('私密聊天正在火速开发中哦!')))\n            })\n          ]),\n          _: 1\n        }),\n        _createElementVNode(\"i\", {\n          class: \"iconfont icon-shipin\",\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => ($setup.videoHandler && $setup.videoHandler(...args)))\n        })\n      ])\n    ]),\n    _createVNode(_component_chat_input, {\n      class: \"chat-input-cmp\",\n      ref: \"chatInput\",\n      onSendMsg: $setup.sendMsg,\n      onUploadFile: $setup.uploadFile\n    }, null, 8, [\"onSendMsg\", \"onUploadFile\"]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createElementVNode(\"div\", {\n        class: \"send\",\n        onClick: _cache[2] || (_cache[2] = ($event: any) => ($setup.proxy.$refs.chatInput.sendMsg()))\n      }, \"发送\")\n    ])\n  ], 32))\n}","import { withModifiers as _withModifiers, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-dd70b656\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"input-container\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"chat-input\",\n      contenteditable: \"\",\n      onMousedown: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.getLastLocation && _ctx.getLastLocation(...args))),\n      onKeydown: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.keydownFunc && _ctx.keydownFunc(...args))),\n      onKeyup: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.keyupFunc && _ctx.keyupFunc(...args))),\n      onPaste: _cache[3] || (_cache[3] = _withModifiers(\n//@ts-ignore\n(...args) => (_ctx.pasteFunc && _ctx.pasteFunc(...args)), [\"prevent\"])),\n      onInput: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.inputFunc && _ctx.inputFunc(...args)))\n    }, null, 32)\n  ]))\n}","\r\nimport { transToTag } from '@/utils/utils'\r\nimport { reactive, toRefs } from '@vue/reactivity'\r\nimport { ComponentInternalInstance, defineComponent, getCurrentInstance, onMounted } from '@vue/runtime-core'\r\nimport { message } from 'ant-design-vue'\r\n\r\nexport default defineComponent({\r\n  name: 'chat-input',\r\n  setup(props, { emit }) {\r\n    const { proxy } = getCurrentInstance() as ComponentInternalInstance\r\n    const state = reactive({\r\n      content: '',\r\n    })\r\n    // 光标最后的位置\r\n    let lastLocation: Range | null = null,\r\n      chatInput: HTMLElement,\r\n      selection: Selection | null\r\n\r\n    // 生命周期\r\n    onMounted(() => {\r\n      chatInput = proxy && proxy.$el.querySelector('.chat-input')\r\n      selection = getSelection()\r\n    })\r\n\r\n    // methods\r\n    // api\r\n    // 插入表情\r\n    const addEmoji = (index: number) => {\r\n      lastLocation || getLastLocation()\r\n\r\n      let emoji = document.createElement('img')\r\n      emoji.src =\r\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII='\r\n      emoji.alt = `[emoji-${index}]`\r\n      emoji.draggable = false\r\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n      // @ts-ignore\r\n      emoji.style = `\r\n        height: 22px;\r\n        width: 24px;\r\n        background: url(${require('@/assets/emoji/emoji.png')});\r\n        background-repeat: no-repeat;\r\n        background-size: 24px;\r\n        margin:0 1px;\r\n        background-position:0 ${-24 * index}px;\r\n        vertical-align: text-bottom;\r\n      `\r\n      insertNode(emoji)\r\n    }\r\n\r\n    // 发送消息\r\n    const sendMsg = () => {\r\n      let content = chatInput.innerHTML.trim()\r\n      if (content === '') {\r\n        message.warn('发送内容不能为空哦')\r\n        return\r\n      } else if (content.length > 5000) {\r\n        message.warn('发送内容长度不能超过5000哦')\r\n        return\r\n      }\r\n\r\n      content = getAltValue(content)\r\n      content = content.replace(/</gi, '&lt;').replace(/>/gi, '&gt;')\r\n\r\n      emit('sendMsg', content)\r\n      chatInput.innerHTML = ''\r\n    }\r\n\r\n    // 事件回调\r\n    // 粘贴事件\r\n    const pasteFunc = (e: ClipboardEvent) => {\r\n      // console.log(e.clipboardData.files[0]);\r\n      let file = e.clipboardData?.files[0]\r\n      if (file) {\r\n        emit('uploadFile', file)\r\n        return\r\n      }\r\n\r\n      // 去除样式\r\n      let content = e.clipboardData?.getData('text')\r\n      // 转译标签，防止用户手动插入标签\r\n      content = content?.replace(/</gi, '&lt;').replace(/>/gi, '&gt;')\r\n\r\n      content = content && transToTag(content)\r\n      // 将文本插回光标处\r\n      document.execCommand('insertHTML', false, content)\r\n      inputFunc()\r\n    }\r\n\r\n    // 输入的回调\r\n    const inputFunc = () => {\r\n      getLastLocation()\r\n\r\n      // contenteditable末尾换行必须至少存在一个\\n\r\n      if (!/\\n$/.test(chatInput.innerHTML)) {\r\n        let node = document.createTextNode('\\n')\r\n        chatInput.appendChild(node)\r\n      }\r\n    }\r\n\r\n    // 键盘按下的回调\r\n    const keydownFunc = (e: KeyboardEvent) => {\r\n      let kc = e.keyCode\r\n      if (e.ctrlKey && kc === 13) {\r\n        e.preventDefault()\r\n        let node = document.createTextNode('\\n')\r\n        insertNode(node)\r\n        chatInput.scrollTo({\r\n          top: chatInput.scrollTop + 20,\r\n          behavior: 'smooth',\r\n        })\r\n      } else if (kc === 13) {\r\n        e.preventDefault()\r\n        sendMsg()\r\n      }\r\n    }\r\n\r\n    // 键盘弹起的回调\r\n    const keyupFunc = (e: KeyboardEvent) => {\r\n      let kc = e.keyCode\r\n      if (kc >= 37 && kc <= 40) {\r\n        getLastLocation()\r\n      } else if (kc === 8) {\r\n        // 退格在删完最后一行内容时会产生br\r\n        if (/<br>/g.test(chatInput.innerHTML)) {\r\n          chatInput.innerHTML = chatInput.innerHTML.replace(/<br>/g, '')\r\n          let range = window.getSelection() // 创建range\r\n          range?.selectAllChildren(chatInput) // range 选择obj下所有子内容\r\n          range?.collapseToEnd() // 光标移至最后\r\n        }\r\n      }\r\n    }\r\n\r\n    // 方法\r\n    // 记录光标的位置\r\n    const getLastLocation = () => {\r\n      chatInput.focus()\r\n      lastLocation = selection?.getRangeAt(0) as Range\r\n      lastLocation.collapse(false)\r\n    }\r\n\r\n    // 插入节点\r\n    const insertNode = (node: Node) => {\r\n      selection?.removeAllRanges()\r\n      lastLocation && selection?.addRange(lastLocation)\r\n\r\n      lastLocation?.deleteContents()\r\n      lastLocation?.insertNode(node)\r\n      inputFunc()\r\n    }\r\n\r\n    // 获取img标签中alt的值\r\n    const getAltValue = (content: string) => {\r\n      let reg = /<img.*?alt=\"(.*?)\".*?>/g\r\n      return content.replace(reg, '$1')\r\n    }\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      addEmoji,\r\n      pasteFunc,\r\n      inputFunc,\r\n      keydownFunc,\r\n      keyupFunc,\r\n      getLastLocation,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./ChatInput.vue?vue&type=template&id=dd70b656&scoped=true&ts=true\"\nimport script from \"./ChatInput.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatInput.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatInput.vue?vue&type=style&index=0&id=dd70b656&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dd70b656\"]])\n\nexport default __exports__","import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, vShow as _vShow, createElementVNode as _createElementVNode, withDirectives as _withDirectives, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, resolveDirective as _resolveDirective, normalizeClass as _normalizeClass, renderSlot as _renderSlot, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-1943fbe2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"emoji-dialog\" }\nconst _hoisted_2 = { class: \"emoji-container\" }\nconst _hoisted_3 = { class: \"emoticon-tab\" }\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = { class: \"emoticon-tab\" }\nconst _hoisted_6 = [\"onClick\"]\nconst _hoisted_7 = { class: \"tab-selector\" }\nconst _hoisted_8 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-biaoqing-xue\" }, null, -1))\nconst _hoisted_9 = [\n  _hoisted_8\n]\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-jushoucang\" }, null, -1))\nconst _hoisted_11 = [\n  _hoisted_10\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_loading_outlined = _resolveComponent(\"loading-outlined\")!\n  const _component_plus_outlined = _resolveComponent(\"plus-outlined\")!\n  const _component_a_upload = _resolveComponent(\"a-upload\")!\n  const _directive_lazyload = _resolveDirective(\"lazyload\")!\n  const _directive_clickoutside = _resolveDirective(\"clickoutside\")!\n\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"div\", _hoisted_2, [\n      _withDirectives(_createElementVNode(\"div\", _hoisted_3, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.emojiNum, (item) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"emoji-item\",\n            onClick: ($event: any) => (_ctx.selectEmoji(0, item)),\n            key: item,\n            style: _normalizeStyle({ 'background-position': `0 ${-24 * item}px` })\n          }, null, 12, _hoisted_4))\n        }), 128))\n      ], 512), [\n        [_vShow, _ctx.currentTab === 0]\n      ]),\n      _withDirectives(_createElementVNode(\"div\", _hoisted_5, [\n        _createVNode(_component_a_upload, {\n          name: \"file\",\n          \"list-type\": \"picture-card\",\n          class: \"avatar-uploader emoticon-item\",\n          data: { emoticon: true },\n          \"show-upload-list\": false,\n          action: \"/api/files/upload_file\",\n          \"before-upload\": _ctx.beforeUpload,\n          onChange: _ctx.handleChange\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", null, [\n              (_ctx.uploadEmoLoading)\n                ? (_openBlock(), _createBlock(_component_loading_outlined, { key: 0 }))\n                : (_openBlock(), _createBlock(_component_plus_outlined, { key: 1 }))\n            ])\n          ]),\n          _: 1\n        }, 8, [\"before-upload\", \"onChange\"]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.emoticonList, (item) => {\n          return _withDirectives((_openBlock(), _createElementBlock(\"img\", {\n            class: \"emoticon-item\",\n            key: item.id,\n            onDragstart: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"])),\n            onClick: ($event: any) => (_ctx.selectEmoji(1, item.src))\n          }, null, 40, _hoisted_6)), [\n            [_directive_lazyload, item.src]\n          ])\n        }), 128))\n      ], 512), [\n        [_vShow, _ctx.currentTab === 1]\n      ]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"tab-item\", { 'current-tab-item': _ctx.currentTab == 0 }]),\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.currentTab = 0))\n        }, _hoisted_9, 2),\n        _createElementVNode(\"div\", {\n          class: _normalizeClass([\"tab-item\", { 'current-tab-item': _ctx.currentTab == 1 }]),\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.currentTab = 1))\n        }, _hoisted_11, 2)\n      ])\n    ], 512), [\n      [_vShow, _ctx.showDialog]\n    ]),\n    _createElementVNode(\"div\", {\n      class: \"btnContainer\",\n      onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.showDialog = !_ctx.showDialog))\n    }, [\n      _renderSlot(_ctx.$slots, \"default\", {}, undefined, true)\n    ])\n  ])), [\n    [_directive_clickoutside, \r\n      () => {\r\n        _ctx.showDialog = false\r\n      }\r\n    ]\n  ])\n}","import { Emoticon } from '@/type'\r\nimport request from '@/utils/request'\r\n\r\n// 获取表情列表\r\nexport function api_getEmoticonList() {\r\n  return request.get('/emoticons/get_emoticon_list') as unknown as getEmoticonListType\r\n}\r\n\r\ntype getEmoticonListType = {\r\n  code: number,\r\n  list: Emoticon[]\r\n}\r\n\r\n// 添加自定义表情  不包含上传\r\nexport function api_addEmoticon(params: { src: string }) {\r\n  return request.get('/emoticons/add_emoticon', { params }) as unknown as addEmoticonType\r\n}\r\n\r\ntype addEmoticonType = {\r\n  code: number,\r\n  id: number,\r\n  src: string\r\n}","\r\nimport { api_getEmoticonList, api_addEmoticon } from '@/api/emoticon'\r\nimport { reactive, toRefs } from '@vue/reactivity'\r\nimport { defineComponent, onBeforeMount, onMounted } from '@vue/runtime-core'\r\nimport { message, UploadChangeParam } from 'ant-design-vue'\r\nimport useSubscribe from '@/hooks/subscribe'\r\nimport { PlusOutlined, LoadingOutlined } from '@ant-design/icons-vue'\r\n\r\nexport default defineComponent({\r\n  name: 'emoji-dialog',\r\n  components: { PlusOutlined, LoadingOutlined },\r\n  setup(props, { emit }) {\r\n    const state: State = reactive({\r\n      // 是否展示表情框\r\n      showDialog: false,\r\n      emojiNum: 124,\r\n      // 当前表情框索引\r\n      currentTab: 0,\r\n      // 表情包列表\r\n      emoticonList: [],\r\n      //\r\n      uploadEmoLoading: false,\r\n    })\r\n\r\n    onBeforeMount(() => {\r\n      useSubscribe([{ msgName: 'addEmoticon', callback: addEmoticon }])\r\n    })\r\n\r\n    // 生命周期\r\n    onMounted(async () => {\r\n      // 获取自定义表情列表\r\n      let res = await api_getEmoticonList()\r\n      if (res) state.emoticonList = res.list\r\n    })\r\n\r\n    // methods\r\n    // 点击选择表情的回调\r\n    // type: 0:emoji   1:自定义表情\r\n    const selectEmoji = (type: number, item: number | string) => {\r\n      emit('selectEmoji', { type, item })\r\n      state.showDialog = false\r\n    }\r\n\r\n    const handleChange = (info: UploadChangeParam) => {\r\n      if (info.file.status === 'uploading') {\r\n        state.uploadEmoLoading = true\r\n        return\r\n      }\r\n      if (info.file.status === 'done') {\r\n        state.emoticonList.unshift({ id: info.file.response.id, src: info.file.response.src })\r\n        state.uploadEmoLoading = false\r\n      }\r\n    }\r\n\r\n    const beforeUpload = (file: File) => {\r\n      const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\r\n      if (!isJpgOrPng) {\r\n        message.error('You can only upload JPG file!')\r\n      }\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n      if (!isLt2M) {\r\n        message.error('Image must smaller than 2MB!')\r\n      }\r\n      return isJpgOrPng && isLt2M\r\n    }\r\n\r\n    const addEmoticon = async (name: string, src: string) => {\r\n      let res = await api_addEmoticon({ src })\r\n      if (res) {\r\n        message.success('表情收藏成功')\r\n        state.emoticonList.unshift({ src: res.src, id: res.id })\r\n      }\r\n    }\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      selectEmoji,\r\n      handleChange,\r\n      beforeUpload,\r\n    }\r\n  },\r\n})\r\n\r\ninterface State {\r\n  showDialog: boolean\r\n  emojiNum: number\r\n  currentTab: number\r\n  emoticonList: { id: number; src: string }[]\r\n  uploadEmoLoading: boolean\r\n}\r\n","import { render } from \"./EmojiDialog.vue?vue&type=template&id=1943fbe2&scoped=true&ts=true\"\nimport script from \"./EmojiDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./EmojiDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./EmojiDialog.vue?vue&type=style&index=0&id=1943fbe2&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1943fbe2\"]])\n\nexport default __exports__","import { vShow as _vShow, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"upload-cmp\" }\nconst _hoisted_2 = { for: \"uploadFile\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"input\", {\n      type: \"file\",\n      id: \"uploadFile\",\n      onChange: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.uploadFile && _ctx.uploadFile(...args)))\n    }, null, 544), [\n      [_vShow, false]\n    ]),\n    _createElementVNode(\"label\", _hoisted_2, [\n      _renderSlot(_ctx.$slots, \"default\")\n    ])\n  ]))\n}","\r\nimport { defineComponent } from '@vue/runtime-core'\r\n\r\nexport default defineComponent({\r\n  name: 'upload-cmp',\r\n  setup(props, { emit }) {\r\n    const uploadFile = (e: Event) => {\r\n      let target = e.target as HTMLInputElement\r\n      if (target != null) {\r\n        let file = (target.files as FileList)[0]\r\n        // let file = (<FileList>(<HTMLInputElement>e.target).files)[0];\r\n        emit('uploadFile', file)\r\n        ;(e.target as HTMLInputElement).value = ''\r\n      }\r\n    }\r\n\r\n    return {\r\n      uploadFile,\r\n    }\r\n  },\r\n  methods: {},\r\n})\r\n","import { render } from \"./UploadCmp.vue?vue&type=template&id=e98590d6&ts=true\"\nimport script from \"./UploadCmp.vue?vue&type=script&lang=ts\"\nexport * from \"./UploadCmp.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\r\nimport { guid } from '@/utils/utils'\r\nimport ChatInput from '@/components/ChatInput.vue'\r\nimport EmojiDialog from '@/components/EmojiDialog.vue'\r\nimport UploadCmp from '@/components/UploadCmp.vue'\r\n\r\nimport Pubsub from 'pubsub-js'\r\nimport { useStore } from 'vuex'\r\nimport { message } from 'ant-design-vue'\r\nimport { ComponentInternalInstance, getCurrentInstance } from 'vue'\r\n\r\nimport { FileInfo, InputChatItem } from '@/type'\r\n\r\nimport useWebRtc from '@/hooks/webrtc'\r\n\r\n// 最大呼叫时间\r\nconst MAXCALLTIME = 15\r\n\r\nexport default {\r\n  components: { ChatInput, EmojiDialog, UploadCmp },\r\n  name: 'input-box',\r\n  setup() {\r\n    const store = useStore()\r\n    const { proxy } = getCurrentInstance() as ComponentInternalInstance\r\n\r\n    // methods\r\n    // 发送消息的回调\r\n    // type 0:文字   1:图片    2:文件    3:自定义表情    4: 通知   5: 视频邀请\r\n    const sendMsg = (content: string | File, type = 0, fileInfo?: FileInfo) => {\r\n      let chatItem: InputChatItem = {\r\n        content,\r\n        receiverId: store.state.currentSession.receiverId,\r\n        uuid: guid(),\r\n        type,\r\n        sessionId: store.state.currentSession.sessionId,\r\n        fileInfo,\r\n      }\r\n      store.state.socket?.emit('chat', chatItem)\r\n\r\n      chatItem['senderId'] = store.state.userInfo.id\r\n      chatItem['status'] = 'loading'\r\n      chatItem['updatedAt'] = new Date().getTime()\r\n      if (type == 1 || type == 2) {\r\n        chatItem['content'] = window.URL.createObjectURL(content as File)\r\n        // 用于重发\r\n        chatItem['file'] = content as File\r\n      }\r\n      Pubsub.publish('sendMsg', chatItem)\r\n    }\r\n\r\n    // 选择表情的回调\r\n    const selectEmoji = ({ type, item }: { type: number; item: number | string }) => {\r\n      if (type === 0) {\r\n        proxy && (proxy.$refs.chatInput as typeof ChatInput).addEmoji(item)\r\n      } else if (type === 1) {\r\n        sendMsg(item.toString(), 3)\r\n      }\r\n    }\r\n\r\n    // 拖动drop文件的回调\r\n    const dropFile = (e: InputEvent) => {\r\n      // let file = e.dataTransfer?.files[0]\r\n      let file = e.dataTransfer && e.dataTransfer.files[0]\r\n      file && uploadFile(file)\r\n    }\r\n\r\n    // 上传文件\r\n    const uploadFile = (file: File) => {\r\n      if (file.size > 2 * 1024 * 1024) {\r\n        message.warn('上传的文件不能超过 2M 哦')\r\n        return\r\n      }\r\n      let type = /image\\/png|image\\/jpeg|image\\/gif/.test(file.type) ? 1 : 2\r\n\r\n      sendMsg(file, type, {\r\n        fileName: file.name,\r\n        size: file.size,\r\n      })\r\n    }\r\n\r\n    const videoHandler = () => {\r\n      // 发送视频邀请\r\n      sendMsg('[视频通话]', 5)\r\n      useWebRtc({ mode: 'sender', type: ['videoCall'] })\r\n      setTimeout(() => {\r\n        if (store.state.pc?.iceConnectionState === 'new') {\r\n          // new说明还没有进入连接状态   自动挂断\r\n          message.info('通话暂时无人接听哦!')\r\n          store.state.pc.hangup()\r\n        }\r\n      }, MAXCALLTIME * 1000)\r\n    }\r\n\r\n    return {\r\n      sendMsg,\r\n      dropFile,\r\n      uploadFile,\r\n      selectEmoji,\r\n      proxy,\r\n      videoHandler,\r\n      message,\r\n    }\r\n  },\r\n}\r\n","import { render } from \"./InputBox.vue?vue&type=template&id=1df7ac67&scoped=true&ts=true\"\nimport script from \"./InputBox.vue?vue&type=script&lang=ts\"\nexport * from \"./InputBox.vue?vue&type=script&lang=ts\"\n\nimport \"./InputBox.vue?vue&type=style&index=0&id=1df7ac67&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1df7ac67\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-ee9dd83a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"noti-dialog\" }\nconst _hoisted_2 = { class: \"\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"noti-container\"\n}\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"noti-title\" }, \"登录操作通知\", -1))\nconst _hoisted_5 = { class: \"noti-content\" }\nconst _hoisted_6 = { class: \"noti-detail\" }\nconst _hoisted_7 = { class: \"noti-detail-item\" }\nconst _hoisted_8 = { class: \"noti-detail-item\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_loading = _resolveComponent(\"loading\")!\n  const _component_scroll_box = _resolveComponent(\"scroll-box\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_scroll_box, {\n      class: \"scroll-box\",\n      listenHeight: \"\",\n      ref: \"scrollBox\",\n      bottomDisabled: true,\n      topDisabled: _ctx.topDisabled,\n      onTouchTop: _ctx.touchTop\n    }, {\n      default: _withCtx(() => [\n        (!_ctx.topDisabled && _ctx.notiList.length >= 30)\n          ? (_openBlock(), _createBlock(_component_loading, { key: 0 }))\n          : _createCommentVNode(\"\", true),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.notiList, (item) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"noti-item\",\n            key: item.createdAt\n          }, [\n            _createElementVNode(\"div\", _hoisted_2, [\n              (item.type === 0)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                    _hoisted_4,\n                    _createElementVNode(\"div\", _hoisted_5, _toDisplayString(`你的账号 \"${_ctx.store.state.userInfo.userName}\" 进行了登录操作`), 1),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                      _createElementVNode(\"div\", _hoisted_7, \"登录ID：\" + _toDisplayString(_ctx.store.state.userInfo.id), 1),\n                      _createElementVNode(\"div\", _hoisted_8, \"登录时间：\" + _toDisplayString(item.createdAt && _ctx.handleTime(item.createdAt)), 1)\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ])\n          ]))\n        }), 128))\n      ]),\n      _: 1\n    }, 8, [\"topDisabled\", \"onTouchTop\"])\n  ]))\n}","import request from '@/utils/request'\r\nimport { Notification } from '@/type'\r\n\r\n// 获取通知列表\r\nexport function api_getNotiList(params: { lastTime?: (number | string) }) {\r\n  return request.get('/notis/get_noti_list', { params }) as unknown as getNotiListType\r\n}\r\n\r\ntype getNotiListType = {\r\n  code: number,\r\n  list: Notification[]\r\n}","\r\nimport { api_getNotiList } from '@/api/notification'\r\nimport ScrollBox from '@/components/ScrollBox.vue'\r\nimport Loading from '@/components/Loading.vue'\r\nimport moment from 'moment'\r\nimport { reactive, toRefs } from '@vue/reactivity'\r\nimport { onMounted, nextTick, getCurrentInstance, computed, ComponentInternalInstance, onBeforeMount, defineComponent } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { Notification, NotiMsg } from '@/type'\r\nimport useSubscribe from '@/hooks/subscribe'\r\n\r\nexport default defineComponent({\r\n  components: { ScrollBox, Loading },\r\n  name: 'noti-dialog',\r\n  setup() {\r\n    const { proxy } = getCurrentInstance() as ComponentInternalInstance\r\n    const store = useStore()\r\n    const state: State = reactive({\r\n      notiList: [],\r\n      // 禁止触顶\r\n      topDisabled: false,\r\n    })\r\n    const compute = {\r\n      handleTime: computed(() => (time: string) => moment(parseInt(time)).format('YYYY年MM月DD日 HH:mm')),\r\n    }\r\n\r\n    // 生命周期\r\n    onBeforeMount(() => {\r\n      useSubscribe([{ msgName: 'notice', callback: addNotification }])\r\n    })\r\n\r\n    onMounted(() => {\r\n      // 第一次创建时直接请求通知数据\r\n      getNotiList()\r\n    })\r\n\r\n    // methods\r\n    const getNotiList = async (lastTime?: number | string) => {\r\n      let res = await api_getNotiList({ lastTime })\r\n\r\n      if (res) {\r\n        let arr = res.list.reverse()\r\n        if (!lastTime) {\r\n          state.notiList.unshift(...arr)\r\n\r\n          // 没传时间，则是第一次获取聊天记录，滚动到底部\r\n          scrollToFunc('instant')\r\n        } else {\r\n          proxy &&\r\n            (proxy.$refs.scrollBox as typeof ScrollBox).keepHeight(() => {\r\n              state.notiList.unshift(...arr)\r\n            })\r\n        }\r\n\r\n        // 聊天记录一次请求30条，小于30条说明没有更多聊天数据了\r\n        state.topDisabled = arr.length !== 30\r\n      }\r\n    }\r\n\r\n    // 触顶的回调\r\n    const touchTop = () => {\r\n      state.topDisabled = true\r\n      getNotiList((state.notiList[0] as Notification).createdAt)\r\n    }\r\n\r\n    // 添加通知\r\n    const addNotification = (name: string, noti: NotiMsg) => {\r\n      let type = null\r\n      switch (noti?.msgType) {\r\n        case 'login':\r\n          type = 0\r\n          break\r\n      }\r\n      state.notiList.push({\r\n        type,\r\n        createdAt: noti.time.toString(),\r\n      })\r\n\r\n      // 判断当前是否离底，再进行滚动\r\n      if ((proxy?.$refs.scrollBox as typeof ScrollBox).getIsBottom(100)) {\r\n        scrollToFunc()\r\n      }\r\n    }\r\n\r\n    // 聊天框滚动到底部\r\n    const scrollToFunc = (behavior?: string) => {\r\n      nextTick(() => {\r\n        if (!proxy?.$refs.scrollBox) return\r\n        ;(proxy.$refs.scrollBox as typeof ScrollBox).scrollToFunc(behavior)\r\n      })\r\n    }\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      ...compute,\r\n      touchTop,\r\n      store,\r\n    }\r\n  },\r\n})\r\n\r\ninterface State {\r\n  notiList: Notification[]\r\n  topDisabled: boolean\r\n}\r\n","import { render } from \"./NotiDialog.vue?vue&type=template&id=ee9dd83a&scoped=true&ts=true\"\nimport script from \"./NotiDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./NotiDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./NotiDialog.vue?vue&type=style&index=0&id=ee9dd83a&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ee9dd83a\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-36a3efbf\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  class: \"video-area\"\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"video\", {\n  id: \"local-video\",\n  autoplay: \"\",\n  muted: \"\"\n}, null, -1))\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-guaduan\" }, null, -1))\nconst _hoisted_4 = [\n  _hoisted_3\n]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_ctx.store.state.chatStatus.videoCall)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"video\", {\n          id: \"remote-video\",\n          autoplay: \"\",\n          controls: \"\",\n          onClick: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"]))\n        }),\n        _createElementVNode(\"div\", {\n          class: \"hangup-btn\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.store.state.pc.hangup()))\n        }, _hoisted_4)\n      ]))\n    : _createCommentVNode(\"\", true)\n}","\r\nimport { defineComponent } from '@vue/runtime-core'\r\nimport { useStore } from 'vuex'\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    const store = useStore()\r\n\r\n    return {\r\n      store,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./VideoWindow.vue?vue&type=template&id=36a3efbf&scoped=true&ts=true\"\nimport script from \"./VideoWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./VideoWindow.vue?vue&type=style&index=0&id=36a3efbf&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-36a3efbf\"]])\n\nexport default __exports__","\r\nimport { defineComponent } from '@vue/runtime-core'\r\nimport { useStore } from 'vuex'\r\nimport ChatDialog from './children/chatDialog/ChatDialog.vue'\r\nimport ChatTopBar from './children/ChatTopBar.vue'\r\nimport InputBox from './children/InputBox.vue'\r\nimport NotiDialog from './children/NotiDialog.vue'\r\nimport VideoWindow from './children/VideoWindow.vue'\r\nexport default defineComponent({\r\n  components: { InputBox, ChatDialog, ChatTopBar, NotiDialog, VideoWindow },\r\n  name: 'chat-window',\r\n  setup() {\r\n    const store = useStore()\r\n\r\n    return {\r\n      store,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./ChatWindow.vue?vue&type=template&id=5377033d&scoped=true&ts=true\"\nimport script from \"./ChatWindow.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatWindow.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatWindow.vue?vue&type=style&index=0&id=5377033d&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5377033d\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vShow as _vShow, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, withDirectives as _withDirectives, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c07dbb6\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"session-list\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"session-top\" }, [\n  /*#__PURE__*/_createElementVNode(\"div\", { class: \"session-search\" }, [\n    /*#__PURE__*/_createElementVNode(\"i\", { class: \"iconfont icon-sousuoxiao\" }),\n    /*#__PURE__*/_createElementVNode(\"input\", {\n      type: \"text\",\n      placeholder: \"搜索\"\n    })\n  ])\n], -1))\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = { class: \"cover\" }\nconst _hoisted_5 = [\"src\"]\nconst _hoisted_6 = [\"textContent\"]\nconst _hoisted_7 = { class: \"session-info\" }\nconst _hoisted_8 = { class: \"session-name\" }\nconst _hoisted_9 = { class: \"name\" }\nconst _hoisted_10 = { class: \"update-at\" }\nconst _hoisted_11 = [\"innerHTML\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_loading = _resolveComponent(\"loading\")!\n  const _component_scroll_box = _resolveComponent(\"scroll-box\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _hoisted_2,\n    _createVNode(_component_scroll_box, {\n      listenHeight: \"\",\n      topDisabled: \"\",\n      bottomDisabled: _ctx.disabledLoad,\n      onTouchBottom: _ctx.touchBottom,\n      class: \"session-list-container\"\n    }, {\n      default: _withCtx(() => [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.store.state.sessionListData.list, (item) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: _normalizeClass([\"session-item\", { 'current-session': _ctx.store.state.currentSession && _ctx.store.state.currentSession.sessionId == item.sessionId }]),\n            key: item.sessionId,\n            onClick: ($event: any) => (_ctx.changeSession(item))\n          }, [\n            _createElementVNode(\"div\", _hoisted_4, [\n              _createElementVNode(\"img\", {\n                src: item.cover,\n                alt: \"\"\n              }, null, 8, _hoisted_5),\n              _withDirectives(_createElementVNode(\"div\", {\n                class: \"unread-num\",\n                style: _normalizeStyle(`font-weight:${item.read > 99 ? 'bold' : 'normal'}`),\n                textContent: _toDisplayString(item.read <= 99 ? item.read : '···')\n              }, null, 12, _hoisted_6), [\n                [_vShow, item.read]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_7, [\n              _createElementVNode(\"div\", _hoisted_8, [\n                _createElementVNode(\"span\", _hoisted_9, _toDisplayString(item.sessionName), 1),\n                _createElementVNode(\"span\", _hoisted_10, _toDisplayString(_ctx.timeHandler(item.updatedAt)), 1)\n              ]),\n              _createElementVNode(\"div\", {\n                class: \"last-chat\",\n                innerHTML: _ctx.transToTag(item.lastChat, 16)\n              }, null, 8, _hoisted_11)\n            ])\n          ], 10, _hoisted_3))\n        }), 128)),\n        _withDirectives(_createVNode(_component_loading, {\n          class: \"loading\",\n          scale: 0.7\n        }, null, 8, [\"scale\"]), [\n          [_vShow, _ctx.store.state.sessionListData.isMore]\n        ])\n      ]),\n      _: 1\n    }, 8, [\"bottomDisabled\", \"onTouchBottom\"])\n  ]))\n}","\r\nimport { transToTag } from '@/utils/utils'\r\nimport ScrollBox from './ScrollBox.vue'\r\nimport Loading from './Loading.vue'\r\nimport Pubsub from 'pubsub-js'\r\n\r\nimport moment from 'moment'\r\nimport { reactive, toRefs, onMounted, computed, defineComponent } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nimport { Session } from '@/type'\r\n\r\nexport default defineComponent({\r\n  components: { ScrollBox, Loading },\r\n  name: 'session-list',\r\n  setup() {\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const state = reactive({\r\n      // 是否禁止加载更多\r\n      disabledLoad: false,\r\n    })\r\n    const compute = {\r\n      timeHandler: computed(\r\n        () =>\r\n          function (time: string) {\r\n            if (parseInt(time) >= today) return moment(parseInt(time)).format('HH:mm')\r\n            else return moment(parseInt(time) * 1).format('YY/M/DD')\r\n          }\r\n      ),\r\n    }\r\n\r\n    // 当天0点时间戳\r\n    let today = moment().startOf('day').valueOf()\r\n\r\n    if (route.params.friendId) {\r\n      // 将当前session改到friendId的会话窗口\r\n      let session = store.state.sessionListData.list.find((item: Session) => item.receiverId.toString() === route.params.friendId)\r\n      store.commit('setCurrentSession', session)\r\n    }\r\n\r\n    // 生命周期\r\n    onMounted(() => {\r\n      // 如果存在currentSession, 则重置当前session的read\r\n      if (store.state.currentSession) {\r\n        store.commit('setTotalUnread', store.state.totalUnread - store.state.currentSession.read)\r\n        store.state.currentSession.read = 0\r\n        store.state.socket.emit('request', {\r\n          function: 'resetUnread',\r\n          params: {\r\n            sessionId: store.state.currentSession.sessionId,\r\n            userId: store.state.userInfo.id,\r\n          },\r\n        })\r\n      }\r\n    })\r\n\r\n    // methods\r\n    // 点击session-item的回调\r\n    const changeSession = (session: Session) => {\r\n      // this.totalUnread -= session.read;\r\n      store.commit('setTotalUnread', store.state.totalUnread - session.read)\r\n      // 清空未读数\r\n      session.read = 0\r\n      // api_resetUnread({ sessionId: session.sessionId })\r\n      store.state.socket.emit('request', {\r\n        function: 'resetUnread',\r\n        params: {\r\n          sessionId: session.sessionId,\r\n          userId: store.state.userInfo.id,\r\n        },\r\n      })\r\n\r\n      let vuexSession = store.state.currentSession\r\n      if (vuexSession && vuexSession.sessionId === session.sessionId) return\r\n\r\n      store.commit('setCurrentSession', session)\r\n    }\r\n\r\n    const touchBottom = () => {\r\n      Pubsub.publish('loadSessionList')\r\n    }\r\n\r\n    return {\r\n      store,\r\n      ...toRefs(state),\r\n      ...compute,\r\n      touchBottom,\r\n      changeSession,\r\n      transToTag,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./SessionList.vue?vue&type=template&id=5c07dbb6&scoped=true&ts=true\"\nimport script from \"./SessionList.vue?vue&type=script&lang=ts\"\nexport * from \"./SessionList.vue?vue&type=script&lang=ts\"\n\nimport \"./SessionList.vue?vue&type=style&index=0&id=5c07dbb6&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5c07dbb6\"]])\n\nexport default __exports__","\r\nimport ChatWindow from '@/components/chatWindow/ChatWindow.vue'\r\nimport SessionList from '@/components/SessionList.vue'\r\nimport { defineComponent } from '@vue/runtime-core'\r\n\r\nexport default defineComponent({\r\n  components: { ChatWindow, SessionList },\r\n  name: 'chat-page',\r\n})\r\n","import { render } from \"./Chat.vue?vue&type=template&id=560dd598&scoped=true&ts=true\"\nimport script from \"./Chat.vue?vue&type=script&lang=ts\"\nexport * from \"./Chat.vue?vue&type=script&lang=ts\"\n\nimport \"./Chat.vue?vue&type=style&index=0&id=560dd598&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-560dd598\"]])\n\nexport default __exports__"],"names":["subList","forEach","item","index","list","PubSub","subscribe","msgName","callback","onBeforeUnmount","unsubscribe","token","pcOption","iceServers","urls","mode","type","remoteVideo","localVideo","mediaStream","remoteStream","dc","onicecandidate","e","candidate","store","emit","data","receiverId","ontrack","nextTick","document","querySelector","srcObject","streams","oniceconnectionstatechange","pc","iceConnectionState","hangup","message","getLocalMediaStream","async","navigator","mediaDevices","getUserMedia","audio","video","err","getTracks","track","addTrack","senderId","id","stop","filter","length","close","status","createAnswer","answer","setLocalDescription","createOffer","offer","createDataChannelFunc","createDataChannel","onopen","send","onmessage","ondatachannel","channel","closedown","videoCallHander","then","createOfferFunc","privateChatHander","RTCPeerConnection","indexOf","PlusOutlined","_objectSpread","target","i","arguments","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","sym","getOwnPropertyDescriptor","enumerable","key","_defineProperty","obj","value","defineProperty","configurable","writable","props","context","p","attrs","_createVNode","AntdIcon","PlusOutlinedSvg","displayName","inheritAttrs","_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_session_list","_resolveComponent","_component_chat_window","_openBlock","_createElementBlock","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_component_chat_top_bar","_component_chat_dialog","_component_input_box","_component_noti_dialog","_component_video_window","state","currentSession","sessionId","_createElementVNode","src","require","alt","_component_loading","_component_scroll_box","onDrop","_withModifiers","$event","info","onDragover","listenHeight","ref","topDisabled","onTouchTop","getChatList","chatList","updatedAt","default","_withCtx","_createBlock","_createCommentVNode","_Fragment","_renderList","_resolveDynamicComponent","component","chat","content","_","api_getChatList","params","request","cancelToken","axios","c","cancelChatListFunc","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_createTextVNode","_hoisted_11","_hoisted_12","_hoisted_13","_component_download_card","scale","title","onClick","args","resend","innerHTML","onContextmenu","rightClickPic","style","_normalizeStyle","imgStyle","onDragstart","checkImg","file","fileInfo","userInfo","avatar","download","fileName","_toDisplayString","sizeShow","downing","progress","defineComponent","name","size","String","setup","reactive","compute","computed","toFixed","cancelFunc","isLocal","test","createTag","replace","process","VUE_APP_DOWNLOAD","responseType","onDownloadProgress","progressEvent","loaded","total","res","blob","URL","createObjectURL","catch","a","createElement","href","click","revokeObjectURL","toRefs","__exports__","components","DownloadCard","Loading","useStore","transToTag","reg","arr","match","split","JSON","parse","others","timer","onMounted","createTimer","clearTimeout","chatItem","uuid","socket","Pubsub","position","x","y","menuList","setTimeout","_hoisted_14","sort","userName","user","userItem","TalkerItem","ScrollBox","NotificationTag","proxy","getCurrentInstance","scrollBox","timeTagFunc","onBeforeMount","createTimeTag","useSubscribe","sendMsg","receiveChat","sendMsgSuccess","sendMsgFail","$refs","lastTime","insertTimeTag","keepHeight","unshift","scrollToFunc","timeTag","push","msg","talkerId","getIsBottom","behavior","userId","today","moment","startOf","valueOf","thisWeek","week","item1","item2","updatedAt_item1","parseInt","updatedAt_item2","time","format","locale","toString","watch","current","sessionName","color","_component_emoji_dialog","_component_upload_cmp","_component_a_tooltip","_component_chat_input","tabindex","dropFile","onSelectEmoji","selectEmoji","onUploadFile","uploadFile","placement","videoHandler","onSendMsg","chatInput","contenteditable","onMousedown","getLastLocation","onKeydown","keydownFunc","onKeyup","keyupFunc","onPaste","pasteFunc","onInput","inputFunc","selection","lastLocation","$el","getSelection","addEmoji","emoji","draggable","insertNode","trim","getAltValue","clipboardData","files","getData","execCommand","node","createTextNode","appendChild","kc","keyCode","ctrlKey","preventDefault","scrollTo","top","scrollTop","range","window","selectAllChildren","collapseToEnd","focus","getRangeAt","collapse","removeAllRanges","addRange","deleteContents","_component_loading_outlined","_component_plus_outlined","_component_a_upload","_directive_lazyload","_resolveDirective","_directive_clickoutside","_withDirectives","emojiNum","_vShow","currentTab","emoticon","action","beforeUpload","onChange","handleChange","uploadEmoLoading","emoticonList","_normalizeClass","showDialog","_renderSlot","$slots","undefined","api_getEmoticonList","api_addEmoticon","LoadingOutlined","addEmoticon","response","isJpgOrPng","isLt2M","for","methods","MAXCALLTIME","ChatInput","EmojiDialog","UploadCmp","guid","Date","getTime","dataTransfer","useWebRtc","bottomDisabled","touchTop","notiList","createdAt","handleTime","api_getNotiList","addNotification","getNotiList","reverse","noti","msgType","autoplay","muted","chatStatus","videoCall","controls","InputBox","ChatDialog","ChatTopBar","NotiDialog","VideoWindow","placeholder","disabledLoad","onTouchBottom","touchBottom","sessionListData","changeSession","cover","read","textContent","timeHandler","lastChat","isMore","route","useRoute","friendId","session","find","commit","totalUnread","function","vuexSession","ChatWindow","SessionList"],"sourceRoot":""}