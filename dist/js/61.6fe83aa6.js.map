{"version":3,"file":"js/61.6fe83aa6.js","mappings":"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","sources":["webpack://socket_chat_vue3/./src/api/user.ts","webpack://socket_chat_vue3/./node_modules/@ant-design/icons-svg/es/asn/PlusOutlined.js","webpack://socket_chat_vue3/./node_modules/@ant-design/icons-vue/es/icons/PlusOutlined.js","webpack://socket_chat_vue3/./src/views/Login.vue?428c","webpack://socket_chat_vue3/./src/views/Login.vue?01f9","webpack://socket_chat_vue3/./src/views/Login.vue"],"sourcesContent":["import { User } from '@/type'\r\nimport request from '@/utils/request'\r\n\r\n// 登录\r\nexport function api_login(loginInfo: { userName: string, password: string }) {\r\n  return request.post('/users/login', loginInfo) as unknown as loginType\r\n}\r\n\r\ntype loginType = {\r\n  code: number,\r\n  msg: string,\r\n  userInfo: User\r\n}\r\n\r\n// 注册\r\nexport function api_signin(userInfo: { userName: string, password: string, email?: string, avatar?: string }) {\r\n  return request.post('/users/signin', userInfo) as unknown as signinType\r\n}\r\n\r\ntype signinType = {\r\n  code: number,\r\n  msg: string,\r\n  userInfo: User\r\n}\r\n\r\n// 判断是否登录\r\nexport function api_getLogin() {\r\n  return request.get('/users/getlogin') as unknown as getLoginType\r\n}\r\n\r\ntype getLoginType = {\r\n  code: number,\r\n  msg: string,\r\n  userInfo: User\r\n}\r\n\r\n// 退出登录\r\nexport function api_logout() {\r\n  return request.get('/users/logout') as unknown as logoutType\r\n}\r\n\r\ntype logoutType = {\r\n  code: number,\r\n  msg: string,\r\n}\r\n\r\n// 获取用户信息\r\nexport function api_getUserInfo(params: { userId: string | number }) {\r\n  return request.get('/users/get_user_info', { params }) as unknown as getUserInfoType\r\n}\r\n\r\ntype getUserInfoType = {\r\n  code: number,\r\n  userInfo: User,\r\n}\r\n","// This icon file is generated automatically.\nvar PlusOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z\" } }] }, \"name\": \"plus\", \"theme\": \"outlined\" };\nexport default PlusOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport PlusOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusOutlined = function PlusOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": PlusOutlinedSvg\n  }), null);\n};\n\nPlusOutlined.displayName = 'PlusOutlined';\nPlusOutlined.inheritAttrs = false;\nexport default PlusOutlined;","import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withKeys as _withKeys, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, withCtx as _withCtx, createVNode as _createVNode, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-715a852a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"login\" }\nconst _hoisted_2 = { class: \"login-card\" }\nconst _hoisted_3 = [\"src\"]\nconst _hoisted_4 = { class: \"register-card\" }\nconst _hoisted_5 = { class: \"reg-user-name\" }\nconst _hoisted_6 = [\"src\"]\nconst _hoisted_7 = { key: 1 }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_loading_outlined = _resolveComponent(\"loading-outlined\")!\n  const _component_plus_outlined = _resolveComponent(\"plus-outlined\")!\n  const _component_a_upload = _resolveComponent(\"a-upload\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"card\", { register: !_ctx.isLogin }])\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"i\", {\n          class: \"iconfont icon-qiehuan\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.isLogin = !_ctx.isLogin))\n        }),\n        _createElementVNode(\"img\", {\n          class: \"avatar\",\n          src: require('@/assets/img/avatar.jpg'),\n          alt: \"\"\n        }, null, 8, _hoisted_3),\n        _createElementVNode(\"div\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"text\",\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.loginInfo.userName) = $event)),\n            placeholder: \"请输入用户名\"\n          }, null, 512), [\n            [_vModelText, _ctx.loginInfo.userName]\n          ])\n        ]),\n        _createElementVNode(\"div\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"password\",\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.loginInfo.password) = $event)),\n            placeholder: \"请输入密码\",\n            onKeydown: _cache[3] || (_cache[3] = _withKeys(\n//@ts-ignore\n(...args) => (_ctx.login && _ctx.login(...args)), [\"enter\"]))\n          }, null, 544), [\n            [_vModelText, _ctx.loginInfo.password]\n          ])\n        ]),\n        _createElementVNode(\"div\", {\n          class: \"btn\",\n          onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_ctx.login && _ctx.login(...args)))\n        }, \"登录\")\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"i\", {\n          class: \"iconfont icon-qiehuan\",\n          onClick: _cache[5] || (_cache[5] = ($event: any) => (_ctx.isLogin = !_ctx.isLogin))\n        }),\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createVNode(_component_a_upload, {\n            name: \"file\",\n            \"list-type\": \"picture-card\",\n            class: \"avatar-uploader upload-avatar\",\n            \"show-upload-list\": false,\n            action: \"/api/files/upload_file\",\n            \"before-upload\": _ctx.beforeUpload,\n            onChange: _ctx.handleChange\n          }, {\n            default: _withCtx(() => [\n              (_ctx.registerInfo.avatar)\n                ? (_openBlock(), _createElementBlock(\"img\", {\n                    key: 0,\n                    src: _ctx.registerInfo.avatar,\n                    alt: \"avatar\"\n                  }, null, 8, _hoisted_6))\n                : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                    (_ctx.imgLoading)\n                      ? (_openBlock(), _createBlock(_component_loading_outlined, { key: 0 }))\n                      : (_openBlock(), _createBlock(_component_plus_outlined, { key: 1 }))\n                  ]))\n            ]),\n            _: 1\n          }, 8, [\"before-upload\", \"onChange\"]),\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"text\",\n            placeholder: \"取一个名字\",\n            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_ctx.registerInfo.userName) = $event))\n          }, null, 512), [\n            [_vModelText, _ctx.registerInfo.userName]\n          ])\n        ]),\n        _createElementVNode(\"div\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"password\",\n            placeholder: \"输入你的密码\",\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_ctx.registerInfo.password) = $event))\n          }, null, 512), [\n            [_vModelText, _ctx.registerInfo.password]\n          ])\n        ]),\n        _createElementVNode(\"div\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"password\",\n            placeholder: \"确认你的密码\",\n            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_ctx.registerInfo.confirmPassword) = $event))\n          }, null, 512), [\n            [_vModelText, _ctx.registerInfo.confirmPassword]\n          ])\n        ]),\n        _createElementVNode(\"div\", null, [\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"text\",\n            placeholder: \"输入你的邮箱\",\n            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_ctx.registerInfo.email) = $event)),\n            onKeydown: _cache[10] || (_cache[10] = _withKeys(\n//@ts-ignore\n(...args) => (_ctx.signin && _ctx.signin(...args)), [\"enter\"]))\n          }, null, 544), [\n            [_vModelText, _ctx.registerInfo.email]\n          ])\n        ]),\n        _createElementVNode(\"div\", {\n          class: \"btn\",\n          onClick: _cache[11] || (_cache[11] = \n//@ts-ignore\n(...args) => (_ctx.signin && _ctx.signin(...args)))\n        }, \"注册\")\n      ])\n    ], 2)\n  ]))\n}","\r\nimport { api_login, api_signin } from '@/api/user'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\nimport { defineComponent, onMounted, reactive, toRefs } from 'vue'\r\nimport { message } from 'ant-design-vue'\r\nimport type { UploadChangeParam, UploadProps } from 'ant-design-vue'\r\nimport { PlusOutlined, LoadingOutlined } from '@ant-design/icons-vue'\r\n\r\nexport default defineComponent({\r\n  name: 'ChatLogin',\r\n  components: { PlusOutlined, LoadingOutlined },\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const state = reactive({\r\n      loginInfo: {\r\n        userName: '',\r\n        password: '',\r\n      },\r\n      registerInfo: {\r\n        avatar: '',\r\n        userName: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        email: '',\r\n      },\r\n      isLogin: true,\r\n\r\n      imgLoading: false,\r\n    })\r\n\r\n    onMounted(() => {\r\n      if (store.state.userInfo) {\r\n        router.go(0)\r\n      }\r\n      store.state.socket?.disconnect()\r\n    })\r\n\r\n    // 点击登录的回调\r\n    const login = async () => {\r\n      // 判断是否存在空值\r\n      for (var key in state.loginInfo) {\r\n        if (!state.loginInfo[key as keyof typeof state.loginInfo].trim()) {\r\n          message.warning(`${key}不能为空哦`)\r\n          return\r\n        }\r\n      }\r\n\r\n      let res = await api_login(state.loginInfo)\r\n      if (res) {\r\n        store.commit('setUserInfo', res.userInfo)\r\n        router.push('/index')\r\n      }\r\n    }\r\n\r\n    // 点击注册的回调\r\n    const signin = async () => {\r\n      // 判断是否存在空值\r\n      for (var key in state.registerInfo) {\r\n        if (!state.registerInfo[key as keyof typeof state.registerInfo].trim()) {\r\n          message.warning(`${key}不能为空哦`)\r\n          return\r\n        }\r\n      }\r\n\r\n      if (state.registerInfo.password !== state.registerInfo.confirmPassword) {\r\n        message.warning('两次密码不一致')\r\n        return\r\n      }\r\n\r\n      // 正则校验邮箱\r\n      let emailReg = /^[A-Za-z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/\r\n      if (!emailReg.test(state.registerInfo.email)) {\r\n        message.warning('邮箱格式错误')\r\n        return\r\n      }\r\n\r\n      let res = await api_signin(state.registerInfo)\r\n\r\n      if (res) {\r\n        message.success('注册成功')\r\n        state.isLogin = true\r\n        state.loginInfo = {\r\n          userName: state.registerInfo.userName,\r\n          password: '',\r\n        }\r\n      }\r\n    }\r\n\r\n    const handleChange = (info: UploadChangeParam) => {\r\n      if (info.file.status === 'uploading') {\r\n        state.imgLoading = true\r\n        return\r\n      }\r\n      if (info.file.status === 'done') {\r\n        state.registerInfo.avatar = info.file.response.src\r\n        state.imgLoading = false\r\n      }\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n    // @ts-ignore\r\n    const beforeUpload = (file: UploadProps['fileList'][number]) => {\r\n      const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png'\r\n      if (!isJpgOrPng) {\r\n        message.error('只能上传 JPG/PNG 格式的文件哦')\r\n      }\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n      if (!isLt2M) {\r\n        message.error('图片大小不能超过2M')\r\n      }\r\n      return isJpgOrPng && isLt2M\r\n    }\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      login,\r\n      signin,\r\n      handleChange,\r\n      beforeUpload,\r\n    }\r\n  },\r\n})\r\n","import { render } from \"./Login.vue?vue&type=template&id=715a852a&scoped=true&ts=true\"\nimport script from \"./Login.vue?vue&type=script&lang=ts\"\nexport * from \"./Login.vue?vue&type=script&lang=ts\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=715a852a&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\ubantu lts\\\\wwwroot\\\\socket_chat_vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-715a852a\"]])\n\nexport default __exports__"],"names":["api_login","loginInfo","request","api_signin","userInfo","api_getLogin","api_logout","api_getUserInfo","params","PlusOutlined","_objectSpread","target","i","arguments","length","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","props","context","p","attrs","_createVNode","AntdIcon","PlusOutlinedSvg","displayName","inheritAttrs","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","render","_ctx","_cache","$props","$setup","$data","$options","_component_loading_outlined","_resolveComponent","_component_plus_outlined","_component_a_upload","_openBlock","_createElementBlock","_createElementVNode","_normalizeClass","register","isLogin","onClick","$event","src","require","alt","_withDirectives","type","userName","placeholder","_vModelText","password","onKeydown","_withKeys","args","login","name","action","beforeUpload","onChange","handleChange","default","_withCtx","registerInfo","avatar","imgLoading","_createBlock","_","confirmPassword","email","signin","defineComponent","components","LoadingOutlined","setup","store","useStore","router","useRouter","state","reactive","onMounted","go","socket","disconnect","async","trim","message","res","commit","push","emailReg","test","info","file","status","response","isJpgOrPng","isLt2M","size","toRefs","__exports__"],"sourceRoot":""}